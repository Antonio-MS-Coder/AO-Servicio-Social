"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[350],{141:(e,s,a)=>{a.d(s,{A:()=>r});var i=a(6734),t=a(579);const r=(0,i.A)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},1387:(e,s,a)=>{a.d(s,{A:()=>r});var i=a(6734),t=a(579);const r=(0,i.A)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},1665:(e,s,a)=>{a.d(s,{A:()=>r});var i=a(6734),t=a(579);const r=(0,i.A)((0,t.jsx)("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents")},2350:(e,s,a)=>{a.r(s),a.d(s,{default:()=>J});var i=a(9379),t=a(5043),r=a(9252),n=a(6446),l=a(5865),o=a(3336),c=a(8939),d=a(4056),A=a(1906),x=a(8903),h=a(2110),m=a(6494),j=a(1045),u=a(3845),g=a(6641),v=a(7392),y=a(35),p=a(6600),b=a(5316),f=a(7784),C=a(4605),S=a(4598),w=a(9347),H=a(1787),z=a(794),W=a(7254),E=a(6734),k=a(579);const I=(0,E.A)((0,k.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy");var T=a(1665),L=a(2796),V=a(141),D=a(8440),M=a(3560),P=a(1387),F=a(9320),N=a(6667),G=a(8836);const J=()=>{const[e,s]=(0,t.useState)(0),[a,E]=(0,t.useState)([]),[J,O]=(0,t.useState)(null),[R,$]=(0,t.useState)(!0),[Z,_]=(0,t.useState)(!1),[B,U]=(0,t.useState)(!1),[q,K]=(0,t.useState)(!1),[Q,X]=(0,t.useState)({open:!1,message:"",severity:"success"}),[Y,ee]=(0,t.useState)({name:"",initials:"",role:"",company:"",testimonial:"",rating:5,verified:!0,order:0}),[se,ae]=(0,t.useState)({name:"",initials:"",beforeTitle:"",afterTitle:"",story:"",beforeSalary:0,afterSalary:0,jobsCompleted:0,rating:5,timeFrame:"En solo 6 meses",isActive:!0});(0,t.useEffect)(()=>{ie()},[]);const ie=async()=>{$(!0);try{const e=(0,N.P)((0,N.rJ)(G.db,"successStories"),(0,N.My)("order","asc")),s=(await(0,N.GG)(e)).docs.map(e=>(0,i.A)({id:e.id},e.data()));E(s);const a=(0,N.P)((0,N.rJ)(G.db,"weeklyStories"),(0,N._M)("isActive","==",!0)),t=await(0,N.GG)(a);t.empty||O((0,i.A)({id:t.docs[0].id},t.docs[0].data()))}catch(e){console.error("Error fetching content:",e),X({open:!0,message:"Error al cargar contenido",severity:"error"})}finally{$(!1)}},te=()=>{ee({name:"",initials:"",role:"",company:"",testimonial:"",rating:5,verified:!0,order:0}),K(!1)},re=()=>{ae({name:"",initials:"",beforeTitle:"",afterTitle:"",story:"",beforeSalary:0,afterSalary:0,jobsCompleted:0,rating:5,timeFrame:"En solo 6 meses",isActive:!0}),K(!1)},ne=e=>e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);return(0,k.jsxs)(r.A,{maxWidth:"xl",sx:{mt:4,mb:4},children:[(0,k.jsxs)(n.A,{sx:{mb:4},children:[(0,k.jsxs)(l.A,{variant:"h4",fontWeight:"bold",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,k.jsx)(I,{sx:{fontSize:40,color:"#007A33"}}),"Gesti\xf3n de Contenido"]}),(0,k.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"Administra las historias de \xe9xito y la historia de la semana"})]}),(0,k.jsx)(o.A,{sx:{mb:3},children:(0,k.jsxs)(c.A,{value:e,onChange:(e,a)=>s(a),children:[(0,k.jsx)(d.A,{label:"Historias de \xc9xito",icon:(0,k.jsx)(T.A,{}),iconPosition:"start"}),(0,k.jsx)(d.A,{label:"Historia de la Semana",icon:(0,k.jsx)(L.A,{}),iconPosition:"start"})]})}),0===e&&(0,k.jsxs)(n.A,{children:[(0,k.jsxs)(n.A,{sx:{mb:3,display:"flex",justifyContent:"space-between"},children:[(0,k.jsx)(l.A,{variant:"h5",children:"Historias de \xc9xito"}),(0,k.jsx)(A.A,{variant:"contained",startIcon:(0,k.jsx)(V.A,{}),onClick:()=>{te(),_(!0)},sx:{bgcolor:"#007A33"},children:"Nueva Historia"})]}),(0,k.jsx)(x.Ay,{container:!0,spacing:3,children:a.map(e=>(0,k.jsx)(x.Ay,{item:!0,xs:12,md:6,lg:4,children:(0,k.jsx)(h.A,{children:(0,k.jsxs)(m.A,{children:[(0,k.jsxs)(n.A,{sx:{display:"flex",alignItems:"flex-start",gap:2,mb:2},children:[(0,k.jsx)(j.A,{sx:{bgcolor:"#007A33",width:56,height:56},children:e.initials}),(0,k.jsxs)(n.A,{flex:1,children:[(0,k.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,k.jsx)(l.A,{variant:"h6",children:e.name}),e.verified&&(0,k.jsx)(D.A,{sx:{fontSize:20,color:"#007A33"}})]}),(0,k.jsx)(l.A,{variant:"body2",color:"text.secondary",children:e.role}),(0,k.jsx)(u.A,{label:e.company,size:"small",color:"primary"})]})]}),(0,k.jsxs)(l.A,{variant:"body2",paragraph:!0,sx:{fontStyle:"italic"},children:['"',e.testimonial,'"']}),(0,k.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,k.jsx)(g.A,{value:e.rating,readOnly:!0,size:"small"}),(0,k.jsxs)(n.A,{children:[(0,k.jsx)(v.A,{size:"small",onClick:()=>(e=>{ee(e),K(!0),_(!0)})(e),children:(0,k.jsx)(M.A,{})}),(0,k.jsx)(v.A,{size:"small",color:"error",onClick:()=>(async e=>{if(window.confirm("\xbfEst\xe1s seguro de eliminar esta historia?"))try{await(0,N.kd)((0,N.H9)(G.db,"successStories",e)),X({open:!0,message:"Historia eliminada exitosamente",severity:"success"}),ie()}catch(s){console.error("Error deleting story:",s),X({open:!0,message:"Error al eliminar historia",severity:"error"})}})(e.id),children:(0,k.jsx)(P.A,{})})]})]})]})})},e.id))}),(0,k.jsxs)(y.A,{open:Z,onClose:()=>_(!1),maxWidth:"md",fullWidth:!0,children:[(0,k.jsx)(p.A,{children:q?"Editar Historia de \xc9xito":"Nueva Historia de \xc9xito"}),(0,k.jsx)(b.A,{children:(0,k.jsxs)(x.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,k.jsx)(x.Ay,{item:!0,xs:12,md:8,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Nombre Completo",value:Y.name,onChange:e=>{const s=e.target.value;ee((0,i.A)((0,i.A)({},Y),{},{name:s,initials:ne(s)}))}})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:4,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Iniciales",value:Y.initials,onChange:e=>ee((0,i.A)((0,i.A)({},Y),{},{initials:e.target.value})),inputProps:{maxLength:2}})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Puesto/Rol",value:Y.role,onChange:e=>ee((0,i.A)((0,i.A)({},Y),{},{role:e.target.value}))})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Empresa",value:Y.company,onChange:e=>ee((0,i.A)((0,i.A)({},Y),{},{company:e.target.value}))})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,children:(0,k.jsx)(f.A,{fullWidth:!0,multiline:!0,rows:4,label:"Testimonio",value:Y.testimonial,onChange:e=>ee((0,i.A)((0,i.A)({},Y),{},{testimonial:e.target.value}))})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:6,children:(0,k.jsxs)(n.A,{children:[(0,k.jsx)(l.A,{component:"legend",children:"Calificaci\xf3n"}),(0,k.jsx)(g.A,{value:Y.rating,onChange:(e,s)=>ee((0,i.A)((0,i.A)({},Y),{},{rating:s||5})),size:"large"})]})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(C.A,{control:(0,k.jsx)(S.A,{checked:Y.verified,onChange:e=>ee((0,i.A)((0,i.A)({},Y),{},{verified:e.target.checked}))}),label:"Verificado"})})]})}),(0,k.jsxs)(w.A,{children:[(0,k.jsx)(A.A,{onClick:()=>_(!1),children:"Cancelar"}),(0,k.jsx)(A.A,{onClick:async()=>{try{q&&Y.id?(await(0,N.mZ)((0,N.H9)(G.db,"successStories",Y.id),(0,i.A)((0,i.A)({},Y),{},{updatedAt:N.Dc.now()})),X({open:!0,message:"Historia actualizada exitosamente",severity:"success"})):(await(0,N.gS)((0,N.rJ)(G.db,"successStories"),(0,i.A)((0,i.A)({},Y),{},{order:a.length,createdAt:N.Dc.now(),updatedAt:N.Dc.now()})),X({open:!0,message:"Historia creada exitosamente",severity:"success"})),_(!1),te(),ie()}catch(e){console.error("Error saving story:",e),X({open:!0,message:"Error al guardar historia",severity:"error"})}},variant:"contained",sx:{bgcolor:"#007A33"},children:q?"Actualizar":"Crear"})]})]})]}),1===e&&(0,k.jsxs)(n.A,{children:[(0,k.jsxs)(n.A,{sx:{mb:3,display:"flex",justifyContent:"space-between"},children:[(0,k.jsx)(l.A,{variant:"h5",children:"Historia de la Semana"}),(0,k.jsx)(A.A,{variant:"contained",startIcon:J?(0,k.jsx)(M.A,{}):(0,k.jsx)(V.A,{}),onClick:()=>{J&&(ae(J),K(!0)),U(!0)},sx:{bgcolor:"#007A33"},children:J?"Editar Historia":"Nueva Historia"})]}),J?(0,k.jsx)(h.A,{sx:{bgcolor:"#FFF3E0"},children:(0,k.jsxs)(m.A,{children:[(0,k.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[(0,k.jsx)(j.A,{sx:{bgcolor:"#007A33",width:80,height:80,fontSize:"2rem"},children:J.initials}),(0,k.jsxs)(n.A,{children:[(0,k.jsx)(u.A,{label:"HISTORIA DE LA SEMANA",color:"warning",size:"small",sx:{mb:1}}),(0,k.jsx)(l.A,{variant:"h5",fontWeight:"bold",children:J.name}),(0,k.jsxs)(l.A,{variant:"subtitle1",color:"text.secondary",children:["De ",J.beforeTitle," a ",J.afterTitle]})]})]}),(0,k.jsxs)(l.A,{variant:"body1",paragraph:!0,sx:{fontStyle:"italic"},children:['"',J.story,'"']}),(0,k.jsxs)(x.Ay,{container:!0,spacing:3,sx:{mt:2},children:[(0,k.jsxs)(x.Ay,{item:!0,xs:6,md:3,children:[(0,k.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"ANTES"}),(0,k.jsxs)(l.A,{variant:"h6",fontWeight:"bold",children:["$",J.beforeSalary.toLocaleString(),"/mes"]})]}),(0,k.jsxs)(x.Ay,{item:!0,xs:6,md:3,children:[(0,k.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"AHORA"}),(0,k.jsxs)(l.A,{variant:"h6",fontWeight:"bold",color:"success.main",children:["$",J.afterSalary.toLocaleString(),"/mes"]})]}),(0,k.jsxs)(x.Ay,{item:!0,xs:6,md:3,children:[(0,k.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"TRABAJOS"}),(0,k.jsx)(l.A,{variant:"h6",fontWeight:"bold",children:J.jobsCompleted})]}),(0,k.jsxs)(x.Ay,{item:!0,xs:6,md:3,children:[(0,k.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"CALIFICACI\xd3N"}),(0,k.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,k.jsx)(l.A,{variant:"h6",fontWeight:"bold",children:J.rating}),(0,k.jsx)(F.A,{sx:{color:"#FFC107"}})]})]})]}),(0,k.jsx)(u.A,{label:J.timeFrame,sx:{mt:2,bgcolor:"#007A33",color:"white"}})]})}):(0,k.jsxs)(o.A,{sx:{p:4,textAlign:"center"},children:[(0,k.jsx)(l.A,{variant:"h6",color:"text.secondary",children:"No hay historia de la semana activa"}),(0,k.jsx)(A.A,{variant:"contained",startIcon:(0,k.jsx)(V.A,{}),onClick:()=>{re(),U(!0)},sx:{mt:2,bgcolor:"#007A33"},children:"Crear Historia de la Semana"})]}),(0,k.jsxs)(y.A,{open:B,onClose:()=>U(!1),maxWidth:"md",fullWidth:!0,children:[(0,k.jsx)(p.A,{children:q?"Editar Historia de la Semana":"Nueva Historia de la Semana"}),(0,k.jsx)(b.A,{children:(0,k.jsxs)(x.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,k.jsx)(x.Ay,{item:!0,xs:12,md:8,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Nombre Completo",value:se.name,onChange:e=>{const s=e.target.value;ae((0,i.A)((0,i.A)({},se),{},{name:s,initials:ne(s)}))}})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:4,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Iniciales",value:se.initials,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{initials:e.target.value})),inputProps:{maxLength:2}})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Puesto Anterior",value:se.beforeTitle,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{beforeTitle:e.target.value}))})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Puesto Actual",value:se.afterTitle,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{afterTitle:e.target.value}))})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,children:(0,k.jsx)(f.A,{fullWidth:!0,multiline:!0,rows:4,label:"Historia",value:se.story,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{story:e.target.value}))})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:3,children:(0,k.jsx)(f.A,{fullWidth:!0,type:"number",label:"Salario Anterior",value:se.beforeSalary,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{beforeSalary:parseInt(e.target.value)})),InputProps:{startAdornment:(0,k.jsx)(H.A,{position:"start",children:"$"})}})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:3,children:(0,k.jsx)(f.A,{fullWidth:!0,type:"number",label:"Salario Actual",value:se.afterSalary,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{afterSalary:parseInt(e.target.value)})),InputProps:{startAdornment:(0,k.jsx)(H.A,{position:"start",children:"$"})}})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:3,children:(0,k.jsx)(f.A,{fullWidth:!0,type:"number",label:"Trabajos Completados",value:se.jobsCompleted,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{jobsCompleted:parseInt(e.target.value)}))})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,md:3,children:(0,k.jsx)(f.A,{fullWidth:!0,label:"Tiempo",value:se.timeFrame,onChange:e=>ae((0,i.A)((0,i.A)({},se),{},{timeFrame:e.target.value})),placeholder:"En solo 6 meses"})}),(0,k.jsx)(x.Ay,{item:!0,xs:12,children:(0,k.jsxs)(n.A,{children:[(0,k.jsx)(l.A,{component:"legend",children:"Calificaci\xf3n"}),(0,k.jsx)(g.A,{value:se.rating,onChange:(e,s)=>ae((0,i.A)((0,i.A)({},se),{},{rating:s||5})),size:"large"})]})})]})}),(0,k.jsxs)(w.A,{children:[(0,k.jsx)(A.A,{onClick:()=>U(!1),children:"Cancelar"}),(0,k.jsx)(A.A,{onClick:async()=>{try{const e=(0,N.P)((0,N.rJ)(G.db,"weeklyStories")),s=await(0,N.GG)(e);for(const a of s.docs)await(0,N.mZ)(a.ref,{isActive:!1});J&&q?(await(0,N.mZ)((0,N.H9)(G.db,"weeklyStories",J.id),(0,i.A)((0,i.A)({},se),{},{isActive:!0,updatedAt:N.Dc.now()})),X({open:!0,message:"Historia de la semana actualizada",severity:"success"})):(await(0,N.gS)((0,N.rJ)(G.db,"weeklyStories"),(0,i.A)((0,i.A)({},se),{},{isActive:!0,weekStartDate:N.Dc.now(),createdAt:N.Dc.now(),updatedAt:N.Dc.now()})),X({open:!0,message:"Historia de la semana creada",severity:"success"})),U(!1),re(),ie()}catch(e){console.error("Error saving weekly story:",e),X({open:!0,message:"Error al guardar historia de la semana",severity:"error"})}},variant:"contained",sx:{bgcolor:"#007A33"},children:q?"Actualizar":"Crear"})]})]})]}),(0,k.jsx)(z.A,{open:Q.open,autoHideDuration:6e3,onClose:()=>X((0,i.A)((0,i.A)({},Q),{},{open:!1})),children:(0,k.jsx)(W.A,{onClose:()=>X((0,i.A)((0,i.A)({},Q),{},{open:!1})),severity:Q.severity,children:Q.message})})]})}},2796:(e,s,a)=>{a.d(s,{A:()=>r});var i=a(6734),t=a(579);const r=(0,i.A)((0,t.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},3560:(e,s,a)=>{a.d(s,{A:()=>r});var i=a(6734),t=a(579);const r=(0,i.A)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},8440:(e,s,a)=>{a.d(s,{A:()=>r});var i=a(6734),t=a(579);const r=(0,i.A)((0,t.jsx)("path",{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48z"}),"Verified")},9320:(e,s,a)=>{a.d(s,{A:()=>r});var i=a(6734),t=a(579);const r=(0,i.A)((0,t.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star")}}]);
//# sourceMappingURL=350.b6cc4192.chunk.js.map