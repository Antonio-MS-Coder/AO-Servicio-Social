"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[475],{475:(e,r,a)=>{a.r(r),a.d(r,{default:()=>le});var t=a(9379),i=a(5043),s=a(9981),n=a(4117),o=a(9252),l=a(6446),c=a(1637),d=a(7254),x=a(1906),p=a(2698),j=a(8446),h=a(5865),A=a(3336),u=a(3845),m=a(7392),b=a(9336),y=a(5721),g=a(5537),v=a(2050),f=a(8734),w=a(2110),I=a(6494),k=a(1045),C=a(8903),S=a(7332),E=a(4770),P=a(9320),N=a(8440),T=a(1082),W=a(7957),J=a(1209),M=a(9509),_=a(3752),z=a(2782),D=a(3817),R=a(8606),B=a(7241),O=a(9893),G=a(4642),H=a(6667),U=a(8836),q=a(9066),L=a(3851),V=a(3933),Z=a(8266),K=a(35),X=a(6600),$=a(5316),F=a(7784),Q=a(9347),Y=a(378),ee=a(2143),re=a(9506),ae=a(3438),te=a(250),ie=a(8558),se=a(6166),ne=a(579);const oe=e=>{let{jobId:r,workerId:a,mode:s}=e;const{t:o}=(0,n.Bd)(),{currentUser:p,userData:j}=(0,q.A)(),[A,b]=(0,i.useState)([]),[v,C]=(0,i.useState)(!0),[S,E]=(0,i.useState)(!1),[N,_]=(0,i.useState)(""),[z,D]=(0,i.useState)(!1),[R,B]=(0,i.useState)(""),[G,oe]=(0,i.useState)(null),[le,ce]=(0,i.useState)(null),[de,xe]=(0,i.useState)(!1),[pe,je]=(0,i.useState)(null),[he,Ae]=(0,i.useState)(null);(0,i.useEffect)(()=>{me(),r&&ue()},[r,a,p]);const ue=async()=>{if(r)try{const e=await(0,H.x7)((0,H.H9)(U.db,"jobs",r));e.exists()&&Ae((0,t.A)({id:e.id},e.data()))}catch(R){console.error("Error fetching job details:",R)}},me=async()=>{if(p){C(!0);try{let e;if("job"===s&&r)e=(0,H.P)((0,H.rJ)(U.db,"applications"),(0,H._M)("jobId","==",r));else if("worker"===s&&a)e=(0,H.P)((0,H.rJ)(U.db,"applications"),(0,H._M)("workerId","==",a));else{if("dashboard"!==s)return b([]),void C(!1);if("worker"===(null===j||void 0===j?void 0:j.role))e=(0,H.P)((0,H.rJ)(U.db,"applications"),(0,H._M)("workerId","==",p.uid));else{const r=(0,H.P)((0,H.rJ)(U.db,"jobs"),(0,H._M)("employerId","==",p.uid)),a=(await(0,H.GG)(r)).docs.map(e=>e.id);if(!(a.length>0))return b([]),void C(!1);e=(0,H.P)((0,H.rJ)(U.db,"applications"),(0,H._M)("jobId","in",a))}}const i=await(0,H.GG)(e),n=[];for(const r of i.docs){const e=r.data(),a=await(0,H.x7)((0,H.H9)(U.db,"workers",e.workerId)),i=a.exists()?a.data():{};n.push((0,t.A)((0,t.A)({id:r.id},e),{},{workerName:i.name||e.workerName||"Usuario",workerPhoto:i.photoUrl,workerRating:i.rating||0,workerExperience:i.experience||0,workerTrade:i.trade}))}b(n)}catch(R){console.error("Error fetching applications:",R),B("Error al cargar las aplicaciones")}finally{C(!1)}}},be=async(e,r)=>{try{await(0,H.mZ)((0,H.H9)(U.db,"applications",e),{status:r,updatedAt:(0,H.O5)()}),me(),ce(null)}catch(R){console.error("Error updating application status:",R),B("Error al actualizar el estado")}},ye=e=>{switch(e){case"pending":return"warning";case"accepted":return"success";case"rejected":return"error";default:return"default"}},ge=e=>{switch(e){case"pending":default:return(0,ne.jsx)(J.A,{});case"accepted":return(0,ne.jsx)(re.A,{});case"rejected":return(0,ne.jsx)(ae.A,{})}};if(v)return(0,ne.jsx)(l.A,{display:"flex",justifyContent:"center",p:4,children:(0,ne.jsx)(c.A,{})});const ve="worker"===(null===j||void 0===j?void 0:j.role)&&r&&"job"===s,fe="employer"===(null===j||void 0===j?void 0:j.role);return(0,ne.jsxs)(l.A,{children:[R&&(0,ne.jsx)(d.A,{severity:"error",sx:{mb:2},onClose:()=>B(""),children:R}),ve&&(0,ne.jsx)(l.A,{mb:3,children:(0,ne.jsx)(x.A,{variant:"contained",color:"primary",size:"large",startIcon:(0,ne.jsx)(M.A,{}),onClick:()=>E(!0),fullWidth:!0,children:"Aplicar a este trabajo"})}),0===A.length?(0,ne.jsx)(w.A,{children:(0,ne.jsx)(I.A,{children:(0,ne.jsx)(h.A,{variant:"body1",color:"text.secondary",textAlign:"center",children:"job"===s?"No hay aplicaciones para este trabajo a\xfan":"worker"===s?"No has aplicado a ning\xfan trabajo":"No hay aplicaciones"})})}):(0,ne.jsx)(y.A,{children:A.map(e=>(0,ne.jsx)(w.A,{sx:{mb:2},children:(0,ne.jsxs)(g.Ay,{children:[(0,ne.jsx)(L.A,{children:(0,ne.jsx)(V.A,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.workerRating&&e.workerRating>0?(0,ne.jsxs)(l.A,{display:"flex",alignItems:"center",sx:{bgcolor:"background.paper",borderRadius:1,px:.5},children:[(0,ne.jsx)(P.A,{sx:{fontSize:14,color:"warning.main"}}),(0,ne.jsx)(h.A,{variant:"caption",children:e.workerRating})]}):void 0,children:(0,ne.jsx)(k.A,{src:e.workerPhoto,alt:e.workerName,children:(0,ne.jsx)(O.A,{})})})}),(0,ne.jsx)(f.A,{primary:(0,ne.jsxs)(l.A,{display:"flex",alignItems:"center",gap:1,children:[(0,ne.jsx)(h.A,{variant:"subtitle1",fontWeight:"bold",children:e.workerName}),(0,ne.jsx)(u.A,{size:"small",label:o("application.status.".concat(e.status)),color:ye(e.status),icon:ge(e.status)}),e.workerExperience&&e.workerExperience>0&&(0,ne.jsx)(u.A,{size:"small",label:"".concat(e.workerExperience," a\xf1os exp."),variant:"outlined"})]}),secondary:(0,ne.jsxs)(l.A,{children:[e.coverLetter&&(0,ne.jsxs)(h.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:['"',e.coverLetter,'"']}),(0,ne.jsxs)(h.A,{variant:"caption",color:"text.secondary",children:["Aplic\xf3: ",new Date(e.appliedAt).toLocaleDateString("es-MX")]})]})}),(0,ne.jsx)(Z.A,{children:(0,ne.jsxs)(l.A,{display:"flex",gap:1,children:[(0,ne.jsx)(m.A,{color:"primary",onClick:()=>(e=>{je({id:e.workerId,name:e.workerName,photo:e.workerPhoto}),xe(!0)})(e),children:(0,ne.jsx)(te.A,{})}),fe&&"pending"===e.status&&(0,ne.jsx)(m.A,{onClick:r=>{ce(r.currentTarget),oe(e)},children:(0,ne.jsx)(ie.A,{})})]})})]})},e.id))}),(0,ne.jsxs)(K.A,{open:S,onClose:()=>E(!1),maxWidth:"sm",fullWidth:!0,children:[(0,ne.jsx)(X.A,{children:"Aplicar al trabajo"}),(0,ne.jsx)($.A,{children:(0,ne.jsxs)(l.A,{sx:{pt:2},children:[he&&(0,ne.jsx)(w.A,{sx:{mb:3,bgcolor:"grey.50"},children:(0,ne.jsxs)(I.A,{children:[(0,ne.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:he.title}),(0,ne.jsxs)(l.A,{display:"flex",gap:2,flexWrap:"wrap",children:[(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(W.A,{}),label:"$".concat(he.salary.amount,"/").concat(he.salary.period)}),(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(T.A,{}),label:he.location}),he.duration&&(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(J.A,{}),label:he.duration})]})]})}),(0,ne.jsx)(F.A,{fullWidth:!0,multiline:!0,rows:4,label:"Carta de presentaci\xf3n (opcional)",placeholder:"Cu\xe9ntale al empleador por qu\xe9 eres el candidato ideal...",value:N,onChange:e=>_(e.target.value),variant:"outlined"})]})}),(0,ne.jsxs)(Q.A,{children:[(0,ne.jsx)(x.A,{onClick:()=>E(!1),children:"Cancelar"}),(0,ne.jsx)(x.A,{onClick:async()=>{if(p&&r){D(!0),B("");try{const e=(0,H.P)((0,H.rJ)(U.db,"applications"),(0,H._M)("jobId","==",r),(0,H._M)("workerId","==",p.uid));if(!(await(0,H.GG)(e)).empty)return void B("Ya has aplicado a este trabajo");await(0,H.gS)((0,H.rJ)(U.db,"applications"),{jobId:r,workerId:p.uid,workerName:(null===j||void 0===j?void 0:j.displayName)||(null===j||void 0===j?void 0:j.email)||"Trabajador",coverLetter:N.trim(),status:"pending",appliedAt:(0,H.O5)(),updatedAt:(0,H.O5)()});const a=(0,H.H9)(U.db,"jobs",r),t=await(0,H.x7)(a);if(t.exists()){const e=t.data().applicants||[];await(0,H.mZ)(a,{applicants:[...e,p.uid]})}E(!1),_(""),me()}catch(R){console.error("Error applying to job:",R),B("Error al enviar la aplicaci\xf3n")}finally{D(!1)}}},variant:"contained",disabled:z,startIcon:z?(0,ne.jsx)(c.A,{size:20}):(0,ne.jsx)(M.A,{}),children:z?"Enviando...":"Enviar aplicaci\xf3n"})]})]}),(0,ne.jsxs)(Y.A,{anchorEl:le,open:Boolean(le),onClose:()=>ce(null),children:[(0,ne.jsxs)(ee.A,{onClick:()=>G&&be(G.id,"accepted"),children:[(0,ne.jsx)(re.A,{sx:{mr:1}})," Aceptar"]}),(0,ne.jsxs)(ee.A,{onClick:()=>G&&be(G.id,"rejected"),children:[(0,ne.jsx)(ae.A,{sx:{mr:1}})," Rechazar"]})]}),pe&&(0,ne.jsx)(se.A,{open:de,onClose:()=>xe(!1),recipientId:pe.id,recipientName:pe.name,recipientPhoto:pe.photo,jobId:r,jobTitle:null===he||void 0===he?void 0:he.title})]})},le=()=>{const{id:e}=(0,s.g)(),{t:r}=(0,n.Bd)(),a=(0,s.Zp)(),{currentUser:L,userData:V}=(0,q.A)(),[Z,K]=(0,i.useState)(null),[X,$]=(0,i.useState)(!0),[F,Q]=(0,i.useState)(""),[Y,ee]=(0,i.useState)(!1),[re,ae]=(0,i.useState)(!1),[te,ie]=(0,i.useState)(null);(0,i.useEffect)(()=>{e&&(le(),ce())},[e]);const le=async()=>{if(e){$(!0);try{const r=await(0,H.x7)((0,H.H9)(U.db,"jobs",e));if(r.exists()){const e=(0,t.A)({id:r.id},r.data());if(K(e),e.employerId){const r=await(0,H.x7)((0,H.H9)(U.db,"employers",e.employerId));r.exists()&&ie(r.data())}}else Q("Trabajo no encontrado")}catch(F){console.error("Error fetching job details:",F),Q("Error al cargar los detalles del trabajo")}finally{$(!1)}}},ce=()=>{const r=localStorage.getItem("savedJobs");if(r&&e){const a=JSON.parse(r);ee(a.includes(e))}};if(X)return(0,ne.jsx)(o.A,{maxWidth:"lg",sx:{py:4},children:(0,ne.jsx)(l.A,{display:"flex",justifyContent:"center",children:(0,ne.jsx)(c.A,{})})});if(F||!Z)return(0,ne.jsxs)(o.A,{maxWidth:"lg",sx:{py:4},children:[(0,ne.jsx)(d.A,{severity:"error",children:F||"Trabajo no encontrado"}),(0,ne.jsx)(x.A,{startIcon:(0,ne.jsx)(S.A,{}),onClick:()=>a("/jobs"),sx:{mt:2},children:"Volver a trabajos"})]});const de="employer"===(null===V||void 0===V?void 0:V.role),xe=Z.employerId===(null===L||void 0===L?void 0:L.uid);return(0,ne.jsxs)(o.A,{maxWidth:"lg",sx:{py:4},children:[(0,ne.jsxs)(p.A,{sx:{mb:3},children:[(0,ne.jsx)(j.A,{underline:"hover",color:"inherit",href:"#",onClick:e=>{e.preventDefault(),a("/")},children:"Inicio"}),(0,ne.jsx)(j.A,{underline:"hover",color:"inherit",href:"#",onClick:e=>{e.preventDefault(),a("/jobs")},children:"Trabajos"}),(0,ne.jsx)(h.A,{color:"text.primary",children:Z.title})]}),(0,ne.jsxs)(C.Ay,{container:!0,spacing:3,children:[(0,ne.jsxs)(C.Ay,{item:!0,xs:12,md:8,children:[(0,ne.jsxs)(A.A,{sx:{p:4,mb:3},children:[(0,ne.jsxs)(l.A,{display:"flex",justifyContent:"space-between",alignItems:"start",mb:3,children:[(0,ne.jsxs)(l.A,{flex:1,children:[(0,ne.jsx)(h.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:Z.title}),(0,ne.jsxs)(l.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(E.A,{}),label:Z.employerName||"Empresa",variant:"outlined"}),(null===te||void 0===te?void 0:te.rating)>0&&(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(P.A,{}),label:"".concat(te.rating.toFixed(1)," (").concat(te.totalRatings,")"),color:"warning",variant:"outlined"}),(null===te||void 0===te?void 0:te.verified)&&(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(N.A,{}),label:"Verificado",color:"success",size:"small"})]}),(0,ne.jsxs)(l.A,{display:"flex",gap:2,flexWrap:"wrap",children:[(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(T.A,{}),label:Z.location,color:"primary"}),(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(W.A,{}),label:"$".concat(Z.salary.amount," / ").concat(r("salary.".concat(Z.salary.period))),color:"success"}),Z.duration&&(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(J.A,{}),label:Z.duration}),(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(M.A,{}),label:r("trades.".concat(Z.trade))})]})]}),(0,ne.jsxs)(l.A,{display:"flex",gap:1,children:[(0,ne.jsx)(m.A,{onClick:()=>{if(!e)return;const r=localStorage.getItem("savedJobs");let a=r?JSON.parse(r):[];a.includes(e)?(a=a.filter(r=>r!==e),ee(!1)):(a.push(e),ee(!0)),localStorage.setItem("savedJobs",JSON.stringify(a))},color:"primary",children:Y?(0,ne.jsx)(_.A,{}):(0,ne.jsx)(z.A,{})}),(0,ne.jsx)(m.A,{onClick:()=>{navigator.share&&Z?navigator.share({title:Z.title,text:"".concat(Z.title," - ").concat(Z.location),url:window.location.href}):navigator.clipboard.writeText(window.location.href)},children:(0,ne.jsx)(D.A,{})})]})]}),(0,ne.jsx)(b.A,{sx:{my:3}}),(0,ne.jsxs)(l.A,{mb:3,children:[(0,ne.jsx)(h.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Descripci\xf3n del trabajo"}),(0,ne.jsx)(h.A,{variant:"body1",paragraph:!0,children:Z.description})]}),Z.requirements&&Z.requirements.length>0&&(0,ne.jsxs)(l.A,{mb:3,children:[(0,ne.jsx)(h.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Requisitos"}),(0,ne.jsx)(y.A,{dense:!0,children:Z.requirements.map((e,r)=>(0,ne.jsxs)(g.Ay,{children:[(0,ne.jsx)(v.A,{children:(0,ne.jsx)(R.A,{color:"primary",fontSize:"small"})}),(0,ne.jsx)(f.A,{primary:e})]},r))})]}),(0,ne.jsxs)(l.A,{display:"flex",alignItems:"center",gap:2,children:[(0,ne.jsx)(h.A,{variant:"body2",color:"text.secondary",children:"Estado:"}),(0,ne.jsx)(u.A,{label:"open"===Z.status?"Abierto":"Cerrado",color:"open"===Z.status?"success":"default",size:"small"}),Z.applicants&&(0,ne.jsx)(u.A,{icon:(0,ne.jsx)(B.A,{}),label:"".concat(Z.applicants.length," aplicantes"),size:"small",variant:"outlined"}),(0,ne.jsxs)(h.A,{variant:"body2",color:"text.secondary",children:["Publicado: ",new Date(Z.createdAt).toLocaleDateString("es-MX")]})]})]}),(xe||!de)&&(0,ne.jsxs)(A.A,{sx:{p:4},children:[(0,ne.jsx)(h.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:xe?"Aplicaciones recibidas":"Tu aplicaci\xf3n"}),(0,ne.jsx)(oe,{jobId:e,mode:"job"})]})]}),(0,ne.jsxs)(C.Ay,{item:!0,xs:12,md:4,children:[!de&&(0,ne.jsx)(w.A,{sx:{mb:3,position:"sticky",top:20},children:(0,ne.jsxs)(I.A,{children:[(0,ne.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"\xbfInteresado en este trabajo?"}),(0,ne.jsx)(h.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Aplica ahora y conecta directamente con el empleador"}),(0,ne.jsx)(oe,{jobId:e,mode:"job"})]})}),(0,ne.jsx)(w.A,{children:(0,ne.jsxs)(I.A,{children:[(0,ne.jsx)(h.A,{variant:"h6",gutterBottom:!0,children:"Sobre el empleador"}),(0,ne.jsxs)(l.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,ne.jsx)(k.A,{src:null===te||void 0===te?void 0:te.logoUrl,sx:{width:56,height:56},children:(0,ne.jsx)(E.A,{})}),(0,ne.jsxs)(l.A,{children:[(0,ne.jsx)(h.A,{variant:"subtitle1",fontWeight:"bold",children:Z.employerName}),(null===te||void 0===te?void 0:te.businessType)&&(0,ne.jsx)(h.A,{variant:"body2",color:"text.secondary",children:te.businessType})]})]}),(null===te||void 0===te?void 0:te.description)&&(0,ne.jsx)(h.A,{variant:"body2",paragraph:!0,children:te.description}),!xe&&L&&(0,ne.jsx)(x.A,{fullWidth:!0,variant:"outlined",startIcon:(0,ne.jsx)(O.A,{}),onClick:()=>ae(!0),children:"Contactar empleador"})]})}),(0,ne.jsx)(w.A,{sx:{mt:3},children:(0,ne.jsxs)(I.A,{children:[(0,ne.jsxs)(l.A,{display:"flex",alignItems:"center",gap:1,mb:2,children:[(0,ne.jsx)(G.A,{color:"warning"}),(0,ne.jsx)(h.A,{variant:"h6",children:"Consejos de seguridad"})]}),(0,ne.jsxs)(y.A,{dense:!0,children:[(0,ne.jsx)(g.Ay,{children:(0,ne.jsx)(f.A,{primary:"Verifica la identidad del empleador",primaryTypographyProps:{variant:"body2"}})}),(0,ne.jsx)(g.Ay,{children:(0,ne.jsx)(f.A,{primary:"Nunca pagues por adelantado",primaryTypographyProps:{variant:"body2"}})}),(0,ne.jsx)(g.Ay,{children:(0,ne.jsx)(f.A,{primary:"Re\xfanete en lugares p\xfablicos",primaryTypographyProps:{variant:"body2"}})}),(0,ne.jsx)(g.Ay,{children:(0,ne.jsx)(f.A,{primary:"Reporta actividades sospechosas",primaryTypographyProps:{variant:"body2"}})})]})]})})]})]}),Z&&(0,ne.jsx)(se.A,{open:re,onClose:()=>ae(!1),recipientId:Z.employerId,recipientName:Z.employerName,recipientPhoto:null===te||void 0===te?void 0:te.logoUrl,jobId:e,jobTitle:Z.title})]})}},6166:(e,r,a)=>{a.d(r,{A:()=>C});var t=a(9379),i=a(5043),s=a(35),n=a(6600),o=a(6446),l=a(1045),c=a(5865),d=a(7392),x=a(5316),p=a(1637),j=a(3336),h=a(9347),A=a(7784),u=a(8606),m=a(3438),b=a(1209),y=a(5874),g=a(6667),v=a(8836),f=a(9066),w=a(4399),I=a(4057),k=a(579);const C=e=>{let{open:r,onClose:a,recipientId:C,recipientName:S,recipientPhoto:E,jobId:P,jobTitle:N}=e;const{currentUser:T}=(0,f.A)(),[W,J]=(0,i.useState)([]),[M,_]=(0,i.useState)(""),[z,D]=(0,i.useState)(!0),[R,B]=(0,i.useState)(!1),O=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(!r||!T)return;D(!0);const e=[T.uid,C].sort().join("_"),a=(0,g.P)((0,g.rJ)(v.db,"messages"),(0,g._M)("conversationId","==",e),(0,g.My)("timestamp","asc")),i=(0,g.aQ)(a,e=>{const r=[];e.forEach(e=>{r.push((0,t.A)({id:e.id},e.data()))}),J(r),D(!1),H()});return()=>i()},[r,T,C]),(0,i.useEffect)(()=>{G()},[W]);const G=()=>{var e;null===(e=O.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},H=async()=>{if(!T)return;const e=(0,g.P)((0,g.rJ)(v.db,"messages"),(0,g._M)("recipientId","==",T.uid),(0,g._M)("senderId","==",C),(0,g._M)("read","==",!1));(await(0,g.GG)(e)).forEach(async e=>{await(0,g.mZ)((0,g.H9)(v.db,"messages",e.id),{read:!0})})},U=async()=>{if(M.trim()&&T&&!R){B(!0);try{const e=[T.uid,C].sort().join("_");await(0,g.gS)((0,g.rJ)(v.db,"messages"),{conversationId:e,senderId:T.uid,recipientId:C,content:M.trim(),timestamp:(0,g.O5)(),read:!1,jobId:P||null}),await(0,g.gS)((0,g.rJ)(v.db,"conversations"),{participants:[T.uid,C],lastMessage:M.trim(),lastMessageTime:(0,g.O5)(),jobId:P||null,jobTitle:N||null}),_("")}catch(e){console.error("Error sending message:",e)}finally{B(!1)}}},q=e=>{if(!e)return"";const r=e.toDate?e.toDate():new Date(e);return(0,w.m)(r,{addSuffix:!0,locale:I.es})};return(0,k.jsxs)(s.A,{open:r,onClose:a,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{height:"70vh",display:"flex",flexDirection:"column"}},children:[(0,k.jsx)(n.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,k.jsxs)(o.A,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,k.jsxs)(o.A,{display:"flex",alignItems:"center",gap:2,children:[(0,k.jsx)(l.A,{src:E,alt:S,children:S[0]}),(0,k.jsxs)(o.A,{children:[(0,k.jsx)(c.A,{variant:"h6",children:S}),N&&(0,k.jsx)(c.A,{variant:"caption",color:"text.secondary",children:N})]})]}),(0,k.jsx)(d.A,{onClick:a,children:(0,k.jsx)(m.A,{})})]})}),(0,k.jsx)(x.A,{sx:{flex:1,overflow:"auto",p:2},children:z?(0,k.jsx)(o.A,{display:"flex",justifyContent:"center",p:4,children:(0,k.jsx)(p.A,{})}):0===W.length?(0,k.jsx)(o.A,{textAlign:"center",p:4,children:(0,k.jsx)(c.A,{color:"text.secondary",children:"Inicia la conversaci\xf3n con un mensaje"})}):(0,k.jsxs)(o.A,{children:[W.map(e=>{const r=e.senderId===(null===T||void 0===T?void 0:T.uid);return(0,k.jsx)(o.A,{display:"flex",justifyContent:r?"flex-end":"flex-start",mb:2,children:(0,k.jsxs)(j.A,{elevation:1,sx:{p:1.5,maxWidth:"70%",bgcolor:r?"primary.main":"grey.100",color:r?"white":"text.primary"},children:[(0,k.jsx)(c.A,{variant:"body2",children:e.content}),(0,k.jsxs)(o.A,{display:"flex",alignItems:"center",gap:.5,mt:.5,children:[(0,k.jsx)(c.A,{variant:"caption",sx:{opacity:.7,color:r?"white":"text.secondary"},children:q(e.timestamp)}),r&&(e.read?(0,k.jsx)(u.A,{sx:{fontSize:14}}):(0,k.jsx)(b.A,{sx:{fontSize:14}}))]})]})},e.id)}),(0,k.jsx)("div",{ref:O})]})}),(0,k.jsx)(h.A,{sx:{p:2,borderTop:1,borderColor:"divider"},children:(0,k.jsx)(A.A,{fullWidth:!0,variant:"outlined",placeholder:"Escribe un mensaje...",value:M,onChange:e=>_(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),U())},multiline:!0,maxRows:3,disabled:R,InputProps:{endAdornment:(0,k.jsx)(d.A,{onClick:U,disabled:!M.trim()||R,color:"primary",children:(0,k.jsx)(y.A,{})})}})})]})}}}]);
//# sourceMappingURL=475.c5d02b2d.chunk.js.map