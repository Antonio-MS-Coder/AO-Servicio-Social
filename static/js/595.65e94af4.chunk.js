"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[595],{5136:(e,i,s)=>{s.d(i,{A:()=>r});var t=s(6734),n=s(579);const r=(0,t.A)((0,n.jsx)("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"}),"School")},5337:(e,i,s)=>{s.d(i,{A:()=>r});var t=s(6734),n=s(579);const r=(0,t.A)((0,n.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")},7595:(e,i,s)=>{s.r(i),s.d(i,{default:()=>X});var t=s(2555),n=s(5043),r=s(9981),a=s(4117),l=s(9252),o=s(1637),c=s(6446),d=s(5865),h=s(7254),x=s(1906),j=s(2110),A=s(6494),p=s(3336),m=s(8911),u=s(3845),f=s(5721),g=s(5537),v=s(3851),b=s(1045),y=s(8734),C=s(611),w=s(3933),z=s(8903),k=s(5337),I=s(8606),S=s(9320),M=s(5136),T=s(8994),V=s(1082),W=s(7957),H=s(1209),B=s(9484),L=s(9509),R=s(9893),E=s(6734),N=s(579);const D=(0,E.A)((0,N.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),P=(0,E.A)((0,N.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),_=(0,E.A)((0,N.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),G=(0,E.A)((0,N.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V10h14zM9 14H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2zm-8 4H7v-2h2zm4 0h-2v-2h2zm4 0h-2v-2h2z"}),"CalendarMonth");var U=s(6667),F=s(8836),J=s(9066);const X=()=>{const{t:e}=(0,a.Bd)(),i=(0,r.Zp)(),{currentUser:s,userData:E}=(0,J.A)(),[X,Z]=(0,n.useState)(!0),[$,q]=(0,n.useState)({profileComplete:0,activeApplications:0,jobsCompleted:0,rating:0,totalRatings:0,earnings:0,certifications:0}),[K,O]=(0,n.useState)([]),[Q,Y]=(0,n.useState)([]),[ee,ie]=(0,n.useState)(null),[se]=(0,n.useState)([{id:1,type:"cert",message:"Nueva certificaci\xf3n disponible: Ingl\xe9s para Turismo",new:!0},{id:2,type:"job",message:"Tu aplicaci\xf3n fue vista por Hotel Camino Real",new:!0},{id:3,type:"tip",message:"Completa tu perfil para tener 3x m\xe1s oportunidades",new:!1}]);(0,n.useEffect)(()=>{s&&"worker"===(null===E||void 0===E?void 0:E.role)?te():"worker"!==(null===E||void 0===E?void 0:E.role)&&i("/dashboard")},[s,E]);const te=async()=>{try{Z(!0);const r=await(0,U.x7)((0,U.H9)(F.db,"workers",s.uid));if(r.exists()){var e,i,n;const a=r.data();ie(a);let l=0;[a.name,a.photoUrl,a.trade,a.experience>0,a.location,a.bio,a.phone||a.whatsapp,(null===(e=a.certifications)||void 0===e?void 0:e.length)>0,(null===(i=a.skills)||void 0===i?void 0:i.length)>0,a.hourlyRate>0].forEach(e=>{e&&(l+=10)});const o=(0,U.P)((0,U.rJ)(F.db,"applications"),(0,U._M)("workerId","==",s.uid),(0,U.My)("appliedAt","desc"),(0,U.AB)(5)),c=await(0,U.GG)(o),d=[];if(c.forEach(e=>{d.push((0,t.A)({id:e.id},e.data()))}),Y(d),a.trade){const e=(0,U.P)((0,U.rJ)(F.db,"jobs"),(0,U._M)("status","==","open"),(0,U._M)("trade","==",a.trade),(0,U.My)("createdAt","desc"),(0,U.AB)(3)),i=await(0,U.GG)(e),s=[];i.forEach(e=>{s.push((0,t.A)({id:e.id},e.data()))}),O(s)}q({profileComplete:l,activeApplications:d.filter(e=>"pending"===e.status).length,jobsCompleted:d.filter(e=>"accepted"===e.status).length,rating:a.rating||0,totalRatings:a.totalRatings||0,earnings:0,certifications:(null===(n=a.certifications)||void 0===n?void 0:n.length)||0})}}catch(r){console.error("Error fetching dashboard data:",r)}finally{Z(!1)}},ne=e=>{switch(e){case"pending":return"warning";case"accepted":return"success";case"rejected":return"error";default:return"default"}},re=e=>{switch(e){case"pending":return"En revisi\xf3n";case"accepted":return"Aceptada";case"rejected":return"No seleccionada";default:return e}};return X?(0,N.jsx)(l.A,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:(0,N.jsx)(o.A,{})}):(0,N.jsxs)(l.A,{maxWidth:"lg",sx:{py:4},children:[(0,N.jsxs)(c.A,{mb:3,children:[(0,N.jsxs)(d.A,{variant:"h4",gutterBottom:!0,children:["\xa1Hola, ",(null===ee||void 0===ee?void 0:ee.name)||(null===E||void 0===E?void 0:E.displayName)||"Trabajador","!"]}),(0,N.jsx)(d.A,{variant:"subtitle1",color:"text.secondary",children:(new Date).toLocaleDateString("es-MX",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),$.profileComplete<100&&(0,N.jsxs)(h.A,{severity:"info",action:(0,N.jsx)(x.A,{color:"inherit",size:"small",onClick:()=>i("/worker-profile-edit"),children:"Completar Perfil"}),sx:{mb:3},children:[(0,N.jsxs)("strong",{children:["Tu perfil est\xe1 ",$.profileComplete,"% completo."]})," Compl\xe9talo para tener 3x m\xe1s oportunidades de trabajo."]}),(0,N.jsxs)(z.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,N.jsx)(z.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,N.jsx)(j.A,{sx:{bgcolor:"primary.light",color:"primary.contrastText"},children:(0,N.jsx)(A.A,{children:(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{variant:"h4",fontWeight:"bold",children:$.activeApplications}),(0,N.jsx)(d.A,{variant:"body2",children:"Aplicaciones Activas"})]}),(0,N.jsx)(k.A,{fontSize:"large"})]})})})}),(0,N.jsx)(z.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,N.jsx)(j.A,{sx:{bgcolor:"success.light",color:"success.contrastText"},children:(0,N.jsx)(A.A,{children:(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{variant:"h4",fontWeight:"bold",children:$.jobsCompleted}),(0,N.jsx)(d.A,{variant:"body2",children:"Trabajos Completados"})]}),(0,N.jsx)(I.A,{fontSize:"large"})]})})})}),(0,N.jsx)(z.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,N.jsx)(j.A,{sx:{bgcolor:"warning.light",color:"warning.contrastText"},children:(0,N.jsx)(A.A,{children:(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{variant:"h4",fontWeight:"bold",children:$.rating>0?$.rating.toFixed(1):"0.0"}),(0,N.jsx)(d.A,{variant:"body2",children:"Calificaci\xf3n"})]}),(0,N.jsx)(S.A,{fontSize:"large"})]})})})}),(0,N.jsx)(z.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,N.jsx)(j.A,{sx:{bgcolor:"info.light",color:"info.contrastText"},children:(0,N.jsx)(A.A,{children:(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,N.jsxs)(c.A,{children:[(0,N.jsx)(d.A,{variant:"h4",fontWeight:"bold",children:$.certifications}),(0,N.jsx)(d.A,{variant:"body2",children:"Certificaciones"})]}),(0,N.jsx)(M.A,{fontSize:"large"})]})})})})]}),(0,N.jsxs)(z.Ay,{container:!0,spacing:3,children:[(0,N.jsxs)(z.Ay,{item:!0,xs:12,md:8,children:[(0,N.jsxs)(p.A,{sx:{p:3,mb:3},children:[(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,N.jsx)(d.A,{variant:"h6",fontWeight:"bold",children:"Trabajos Recomendados para Ti"}),(0,N.jsx)(x.A,{endIcon:(0,N.jsx)(T.A,{}),onClick:()=>i("/jobs"),children:"Ver Todos"})]}),K.length>0?(0,N.jsx)(z.Ay,{container:!0,spacing:2,children:K.map(e=>(0,N.jsx)(z.Ay,{item:!0,xs:12,children:(0,N.jsx)(j.A,{variant:"outlined",children:(0,N.jsx)(A.A,{children:(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"start",children:[(0,N.jsxs)(c.A,{flex:1,children:[(0,N.jsx)(d.A,{variant:"subtitle1",fontWeight:"bold",children:e.title}),(0,N.jsx)(d.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:e.employerName}),(0,N.jsxs)(m.A,{direction:"row",spacing:1,mt:1,children:[(0,N.jsx)(u.A,{icon:(0,N.jsx)(V.A,{}),label:e.location,size:"small"}),(0,N.jsx)(u.A,{icon:(0,N.jsx)(W.A,{}),label:"$".concat(e.salary.amount,"/").concat(e.salary.period),size:"small",color:"success"}),e.duration&&(0,N.jsx)(u.A,{icon:(0,N.jsx)(H.A,{}),label:e.duration,size:"small"})]})]}),(0,N.jsx)(x.A,{variant:"contained",size:"small",onClick:()=>i("/jobs/".concat(e.id)),children:"Ver Detalles"})]})})})},e.id))}):(0,N.jsxs)(c.A,{textAlign:"center",py:4,children:[(0,N.jsx)(d.A,{color:"text.secondary",children:"No hay trabajos recomendados en este momento"}),(0,N.jsx)(x.A,{variant:"outlined",sx:{mt:2},onClick:()=>i("/jobs"),startIcon:(0,N.jsx)(B.A,{}),children:"Buscar Trabajos"})]})]}),(0,N.jsxs)(p.A,{sx:{p:3},children:[(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,N.jsx)(d.A,{variant:"h6",fontWeight:"bold",children:"Mis Aplicaciones Recientes"}),(0,N.jsx)(x.A,{endIcon:(0,N.jsx)(T.A,{}),onClick:()=>i("/dashboard"),children:"Ver Todas"})]}),Q.length>0?(0,N.jsx)(f.A,{children:Q.map(e=>(0,N.jsxs)(g.Ay,{divider:!0,children:[(0,N.jsx)(v.A,{children:(0,N.jsx)(b.A,{children:(0,N.jsx)(L.A,{})})}),(0,N.jsx)(y.A,{primary:(0,N.jsxs)(c.A,{display:"flex",alignItems:"center",gap:1,children:[(0,N.jsxs)(d.A,{variant:"subtitle2",children:["Aplicaci\xf3n #",e.id.slice(-6)]}),(0,N.jsx)(u.A,{label:re(e.status),color:ne(e.status),size:"small"})]}),secondary:(0,N.jsxs)(d.A,{variant:"caption",children:["Aplicado el ",new Date(e.appliedAt).toLocaleDateString("es-MX")]})}),(0,N.jsx)(x.A,{size:"small",onClick:()=>i("/jobs/".concat(e.jobId)),children:"Ver Trabajo"})]},e.id))}):(0,N.jsxs)(c.A,{textAlign:"center",py:4,children:[(0,N.jsx)(d.A,{color:"text.secondary",children:"No has aplicado a ning\xfan trabajo a\xfan"}),(0,N.jsx)(x.A,{variant:"outlined",sx:{mt:2},onClick:()=>i("/jobs"),startIcon:(0,N.jsx)(B.A,{}),children:"Buscar Trabajos"})]})]})]}),(0,N.jsxs)(z.Ay,{item:!0,xs:12,md:4,children:[(0,N.jsx)(j.A,{sx:{mb:3},children:(0,N.jsxs)(A.A,{children:[(0,N.jsxs)(c.A,{display:"flex",alignItems:"center",gap:2,mb:2,children:[(0,N.jsx)(b.A,{src:null===ee||void 0===ee?void 0:ee.photoUrl,sx:{width:60,height:60},children:(0,N.jsx)(R.A,{})}),(0,N.jsxs)(c.A,{flex:1,children:[(0,N.jsx)(d.A,{variant:"subtitle1",fontWeight:"bold",children:(null===ee||void 0===ee?void 0:ee.name)||"Completa tu perfil"}),(0,N.jsx)(d.A,{variant:"body2",color:"text.secondary",children:null!==ee&&void 0!==ee&&ee.trade?e("trades.".concat(ee.trade)):"Sin oficio definido"})]})]}),(0,N.jsxs)(c.A,{mb:2,children:[(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",mb:1,children:[(0,N.jsx)(d.A,{variant:"body2",children:"Perfil Completo"}),(0,N.jsxs)(d.A,{variant:"body2",fontWeight:"bold",children:[$.profileComplete,"%"]})]}),(0,N.jsx)(C.A,{variant:"determinate",value:$.profileComplete,sx:{height:8,borderRadius:4},color:$.profileComplete>=80?"success":"warning"})]}),(0,N.jsx)(x.A,{fullWidth:!0,variant:"outlined",startIcon:(0,N.jsx)(D,{}),onClick:()=>i("/worker-profile-edit"),children:"Editar Perfil"})]})}),(0,N.jsx)(j.A,{sx:{mb:3},children:(0,N.jsxs)(A.A,{children:[(0,N.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,N.jsx)(d.A,{variant:"h6",children:"Notificaciones"}),(0,N.jsx)(w.A,{badgeContent:se.filter(e=>e.new).length,color:"error",children:(0,N.jsx)(P,{})})]}),(0,N.jsx)(f.A,{dense:!0,children:se.map(e=>(0,N.jsxs)(g.Ay,{children:[(0,N.jsx)(v.A,{children:(0,N.jsx)(b.A,{sx:{width:32,height:32,bgcolor:e.new?"primary.light":"grey.300"},children:"cert"===e.type?(0,N.jsx)(M.A,{fontSize:"small"}):"job"===e.type?(0,N.jsx)(L.A,{fontSize:"small"}):(0,N.jsx)(_,{fontSize:"small"})})}),(0,N.jsx)(y.A,{primary:(0,N.jsx)(d.A,{variant:"body2",fontWeight:e.new?"bold":"normal",children:e.message})})]},e.id))})]})}),(0,N.jsx)(j.A,{children:(0,N.jsxs)(A.A,{children:[(0,N.jsx)(d.A,{variant:"h6",gutterBottom:!0,children:"Acciones R\xe1pidas"}),(0,N.jsxs)(m.A,{spacing:1,children:[(0,N.jsx)(x.A,{fullWidth:!0,variant:"contained",startIcon:(0,N.jsx)(B.A,{}),onClick:()=>i("/jobs"),children:"Buscar Trabajos"}),(0,N.jsx)(x.A,{fullWidth:!0,variant:"outlined",startIcon:(0,N.jsx)(M.A,{}),onClick:()=>i("/worker-profile-edit"),children:"Ver Certificaciones"}),(0,N.jsx)(x.A,{fullWidth:!0,variant:"outlined",startIcon:(0,N.jsx)(G,{}),onClick:()=>i("/worker-profile-edit"),children:"Actualizar Disponibilidad"})]})]})})]})]})]})}},8994:(e,i,s)=>{s.d(i,{A:()=>r});var t=s(6734),n=s(579);const r=(0,t.A)((0,n.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward")},9484:(e,i,s)=>{s.d(i,{A:()=>r});var t=s(6734),n=s(579);const r=(0,t.A)((0,n.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=595.65e94af4.chunk.js.map