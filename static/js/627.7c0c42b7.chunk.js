"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[627],{3627:(e,a,r)=>{r.r(a),r.d(a,{default:()=>E});var t=r(5043),o=r(9981),n=r(4117),i=r(9252),s=r(6446),l=r(3336),d=r(5865),c=r(7254),h=r(4669),u=r(4056),x=r(3495),p=r(1787),m=r(7392),b=r(1906),A=r(1637),j=r(9336),g=r(35),f=r(6600),v=r(5316),y=r(9347),C=r(7332),w=r(8262),N=r(1991),k=r(9974),S=r(3632),W=r(3559),D=r(9066),z=r(8836),I=r(6667),B=r(579);const E=()=>{const{t:e}=(0,n.Bd)(),a=(0,o.Zp)(),{login:r,currentUser:E}=(0,D.A)(),[O,H]=(0,t.useState)(0),[P,T]=(0,t.useState)(""),[q,R]=(0,t.useState)(""),[U,M]=(0,t.useState)(!1),[_,F]=(0,t.useState)(""),[G,L]=(0,t.useState)(""),[V,Z]=(0,t.useState)(null),[J,K]=(0,t.useState)(null),[Q,X]=(0,t.useState)(!1),[Y,$]=(0,t.useState)(null),[ee,ae]=(0,t.useState)(""),[re,te]=(0,t.useState)(!1),[oe,ne]=(0,t.useState)("input");(0,t.useEffect)(()=>{if(!J){const e=(0,z.zE)("recaptcha-container");K(e)}},[J]);const ie=async e=>{try{if(te(!0),!Y)return;const r={id:Y.uid,email:Y.email||"",phone:Y.phoneNumber||"",displayName:Y.displayName||"",photoURL:Y.photoURL||"",role:e,createdAt:new Date,updatedAt:new Date};await(0,I.BN)((0,I.H9)(z.db,"users",Y.uid),r),"worker"===e?await(0,I.BN)((0,I.H9)(z.db,"workers",Y.uid),{userId:Y.uid,name:Y.displayName||"",phone:Y.phoneNumber||"",trade:"",experience:0,location:"\xc1lvaro Obreg\xf3n",certifications:[],rating:0,totalRatings:0,available:!0,createdAt:new Date,updatedAt:new Date}):await(0,I.BN)((0,I.H9)(z.db,"employers",Y.uid),{userId:Y.uid,companyName:"",contactName:Y.displayName||"",phone:Y.phoneNumber||"",businessType:"",location:"\xc1lvaro Obreg\xf3n",rating:0,totalRatings:0,createdAt:new Date,updatedAt:new Date}),X(!1),a("/onboarding")}catch(ee){ae(ee.message)}finally{te(!1)}};return(0,B.jsxs)(i.A,{maxWidth:"sm",children:[(0,B.jsx)(s.A,{sx:{mt:8,mb:4},children:(0,B.jsxs)(l.A,{elevation:3,sx:{p:4},children:[(0,B.jsx)(d.A,{variant:"h4",align:"center",gutterBottom:!0,fontWeight:"bold",children:"Bienvenido a DOOM"}),(0,B.jsx)(d.A,{variant:"body1",align:"center",color:"text.secondary",gutterBottom:!0,sx:{mb:3},children:"Conectando talento con oportunidades para el Mundial 2026"}),ee&&(0,B.jsx)(c.A,{severity:"error",sx:{mb:2},onClose:()=>ae(""),children:ee}),(0,B.jsxs)(h.A,{value:O,onChange:(e,a)=>H(a),centered:!0,sx:{mb:3},children:[(0,B.jsx)(u.A,{icon:(0,B.jsx)(w.A,{}),label:"Email"}),(0,B.jsx)(u.A,{icon:(0,B.jsx)(k.A,{}),label:"Tel\xe9fono"})]}),0===O&&(0,B.jsxs)(s.A,{children:[(0,B.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{ae(""),te(!0),await r(P,q),a("/dashboard")}catch(ee){"auth/user-not-found"===ee.code?ae("Usuario no encontrado. Por favor reg\xedstrate primero."):"auth/wrong-password"===ee.code?ae("Contrase\xf1a incorrecta."):ae(ee.message)}finally{te(!1)}},children:[(0,B.jsx)(x.A,{fullWidth:!0,label:"Correo electr\xf3nico",type:"email",value:P,onChange:e=>T(e.target.value),required:!0,disabled:re,sx:{mb:2},InputProps:{startAdornment:(0,B.jsx)(p.A,{position:"start",children:(0,B.jsx)(w.A,{color:"action"})})}}),(0,B.jsx)(x.A,{fullWidth:!0,label:"Contrase\xf1a",type:U?"text":"password",value:q,onChange:e=>R(e.target.value),required:!0,disabled:re,sx:{mb:2},InputProps:{endAdornment:(0,B.jsx)(p.A,{position:"end",children:(0,B.jsx)(m.A,{onClick:()=>M(!U),edge:"end",children:U?(0,B.jsx)(W.A,{}):(0,B.jsx)(S.A,{})})})}}),(0,B.jsx)(b.A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:re,sx:{mb:2},children:re?(0,B.jsx)(A.A,{size:24,color:"inherit"}):"Iniciar Sesi\xf3n"})]}),(0,B.jsx)(s.A,{sx:{textAlign:"center",mb:2},children:(0,B.jsx)(o.N_,{to:"/forgot-password",style:{textDecoration:"none"},children:(0,B.jsx)(d.A,{variant:"body2",color:"primary",children:"\xbfOlvidaste tu contrase\xf1a?"})})})]}),1===O&&(0,B.jsx)(s.A,{children:"input"===oe?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(x.A,{fullWidth:!0,label:"N\xfamero de tel\xe9fono",placeholder:"5512345678",value:_,onChange:e=>F(e.target.value),disabled:re,sx:{mb:2},InputProps:{startAdornment:(0,B.jsx)(p.A,{position:"start",children:(0,B.jsx)(d.A,{color:"text.secondary",children:"+52"})})},helperText:"Ingresa tu n\xfamero de 10 d\xedgitos"}),(0,B.jsx)(b.A,{fullWidth:!0,variant:"contained",size:"large",onClick:async()=>{try{ae(""),te(!0);let e=_;if(e.startsWith("+")||(e=e.startsWith("52")?"+"+e:"+52"+e),!J)throw new Error("reCAPTCHA no est\xe1 configurado");const a=await(0,z.zN)(e,J);Z(a),ne("verify")}catch(ee){"auth/invalid-phone-number"===ee.code?ae("N\xfamero de tel\xe9fono inv\xe1lido. Usa formato: 5512345678"):"auth/too-many-requests"===ee.code?ae("Demasiados intentos. Por favor intenta m\xe1s tarde."):ae(ee.message);const a=(0,z.zE)("recaptcha-container");K(a)}finally{te(!1)}},disabled:re||_.length<10,sx:{mb:2},children:re?(0,B.jsx)(A.A,{size:24,color:"inherit"}):"Enviar c\xf3digo"})]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(b.A,{startIcon:(0,B.jsx)(C.A,{}),onClick:()=>{ne("input"),L("")},sx:{mb:2},children:"Cambiar n\xfamero"}),(0,B.jsx)(x.A,{fullWidth:!0,label:"C\xf3digo de verificaci\xf3n",placeholder:"123456",value:G,onChange:e=>L(e.target.value),disabled:re,sx:{mb:2},helperText:"Ingresa el c\xf3digo de 6 d\xedgitos enviado a tu tel\xe9fono"}),(0,B.jsx)(b.A,{fullWidth:!0,variant:"contained",size:"large",onClick:async()=>{try{if(ae(""),te(!0),!V)throw new Error("No hay verificaci\xf3n pendiente");const e=(await V.confirm(G)).user;(await(0,I.x7)((0,I.H9)(z.db,"users",e.uid))).exists()?a("/dashboard"):($(e),X(!0))}catch(ee){"auth/invalid-verification-code"===ee.code?ae("C\xf3digo de verificaci\xf3n incorrecto."):ae(ee.message)}finally{te(!1)}},disabled:re||G.length<6,sx:{mb:2},children:re?(0,B.jsx)(A.A,{size:24,color:"inherit"}):"Verificar"})]})}),(0,B.jsx)(j.A,{sx:{my:3},children:"O"}),(0,B.jsx)(b.A,{fullWidth:!0,variant:"outlined",size:"large",startIcon:(0,B.jsx)(N.A,{}),onClick:async()=>{try{ae(""),te(!0);const e=(await(0,z.G6)()).user;(await(0,I.x7)((0,I.H9)(z.db,"users",e.uid))).exists()?a("/dashboard"):($(e),X(!0))}catch(ee){"auth/popup-closed-by-user"===ee.code?ae("Inicio de sesi\xf3n cancelado."):ae(ee.message)}finally{te(!1)}},disabled:re,sx:{mb:2,borderColor:"#4285f4",color:"#4285f4","&:hover":{borderColor:"#357ae8",backgroundColor:"rgba(66, 133, 244, 0.04)"}},children:"Continuar con Google"}),(0,B.jsx)(s.A,{sx:{textAlign:"center",mt:2},children:(0,B.jsxs)(d.A,{variant:"body2",children:["\xbfNo tienes cuenta?"," ",(0,B.jsx)(o.N_,{to:"/register",style:{textDecoration:"none"},children:(0,B.jsx)(d.A,{component:"span",color:"primary",fontWeight:"bold",children:"Reg\xedstrate aqu\xed"})})]})})]})}),(0,B.jsx)("div",{id:"recaptcha-container"}),(0,B.jsxs)(g.A,{open:Q,maxWidth:"sm",fullWidth:!0,children:[(0,B.jsx)(f.A,{children:(0,B.jsx)(d.A,{variant:"h5",fontWeight:"bold",children:"\xbfC\xf3mo quieres usar DOOM?"})}),(0,B.jsxs)(v.A,{children:[(0,B.jsx)(d.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Selecciona tu perfil para personalizar tu experiencia"}),(0,B.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,B.jsxs)(l.A,{elevation:2,sx:{p:3,cursor:"pointer",border:"2px solid transparent","&:hover":{borderColor:"primary.main",backgroundColor:"action.hover"}},onClick:()=>ie("worker"),children:[(0,B.jsx)(d.A,{variant:"h6",fontWeight:"bold",color:"primary",children:"Soy Trabajador"}),(0,B.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Busco oportunidades de empleo para el Mundial 2026"})]}),(0,B.jsxs)(l.A,{elevation:2,sx:{p:3,cursor:"pointer",border:"2px solid transparent","&:hover":{borderColor:"secondary.main",backgroundColor:"action.hover"}},onClick:()=>ie("employer"),children:[(0,B.jsx)(d.A,{variant:"h6",fontWeight:"bold",color:"secondary",children:"Soy Empleador"}),(0,B.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Busco contratar trabajadores calificados"})]})]})]}),(0,B.jsx)(y.A,{children:(0,B.jsx)(b.A,{onClick:()=>X(!1),disabled:re,children:"Cancelar"})})]})]})}}}]);
//# sourceMappingURL=627.7c0c42b7.chunk.js.map