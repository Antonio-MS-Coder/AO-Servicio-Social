"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[627],{1991:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var r=t(6734),o=t(579);const n=(0,r.A)((0,o.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google")},3559:(e,a,t)=>{t.d(a,{A:()=>n});var r=t(6734),o=t(579);const n=(0,r.A)((0,o.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},3627:(e,a,t)=>{t.r(a),t.d(a,{default:()=>B});var r=t(5043),o=t(9981),n=t(4117),i=t(9252),s=t(6446),l=t(3336),d=t(5865),c=t(7254),h=t(4669),u=t(4056),x=t(3495),p=t(1787),m=t(7392),b=t(1906),A=t(1637),j=t(9336),g=t(35),v=t(6600),f=t(5316),y=t(9347),C=t(7332),w=t(8262),N=t(1991),k=t(9974),S=t(3632),W=t(3559),z=t(9066),D=t(8836),I=t(6667),M=t(579);const B=()=>{const{t:e}=(0,n.Bd)(),a=(0,o.Zp)(),{login:t,currentUser:B}=(0,z.A)(),[O,E]=(0,r.useState)(0),[H,P]=(0,r.useState)(""),[T,q]=(0,r.useState)(""),[R,U]=(0,r.useState)(!1),[L,_]=(0,r.useState)(""),[G,V]=(0,r.useState)(""),[F,Z]=(0,r.useState)(null),[J,K]=(0,r.useState)(null),[Q,X]=(0,r.useState)(!1),[Y,$]=(0,r.useState)(null),[ee,ae]=(0,r.useState)(""),[te,re]=(0,r.useState)(!1),[oe,ne]=(0,r.useState)("input");(0,r.useEffect)(()=>{if(!J){const e=(0,D.zE)("recaptcha-container");K(e)}},[J]);const ie=async e=>{try{if(re(!0),!Y)return;const t={id:Y.uid,email:Y.email||"",phone:Y.phoneNumber||"",displayName:Y.displayName||"",photoURL:Y.photoURL||"",role:e,createdAt:new Date,updatedAt:new Date};await(0,I.BN)((0,I.H9)(D.db,"users",Y.uid),t),"worker"===e?await(0,I.BN)((0,I.H9)(D.db,"workers",Y.uid),{userId:Y.uid,name:Y.displayName||"",phone:Y.phoneNumber||"",trade:"",experience:0,location:"\xc1lvaro Obreg\xf3n",certifications:[],rating:0,totalRatings:0,available:!0,createdAt:new Date,updatedAt:new Date}):await(0,I.BN)((0,I.H9)(D.db,"employers",Y.uid),{userId:Y.uid,companyName:"",contactName:Y.displayName||"",phone:Y.phoneNumber||"",businessType:"",location:"\xc1lvaro Obreg\xf3n",rating:0,totalRatings:0,createdAt:new Date,updatedAt:new Date}),X(!1),a("/onboarding")}catch(ee){ae(ee.message)}finally{re(!1)}};return(0,M.jsxs)(i.A,{maxWidth:"sm",children:[(0,M.jsx)(s.A,{sx:{mt:8,mb:4},children:(0,M.jsxs)(l.A,{elevation:3,sx:{p:4},children:[(0,M.jsx)(d.A,{variant:"h4",align:"center",gutterBottom:!0,fontWeight:"bold",children:"Bienvenido a DOOM"}),(0,M.jsx)(d.A,{variant:"body1",align:"center",color:"text.secondary",gutterBottom:!0,sx:{mb:3},children:"Conectando talento con oportunidades para el Mundial 2026"}),ee&&(0,M.jsx)(c.A,{severity:"error",sx:{mb:2},onClose:()=>ae(""),children:ee}),(0,M.jsxs)(h.A,{value:O,onChange:(e,a)=>E(a),centered:!0,sx:{mb:3},children:[(0,M.jsx)(u.A,{icon:(0,M.jsx)(w.A,{}),label:"Email"}),(0,M.jsx)(u.A,{icon:(0,M.jsx)(k.A,{}),label:"Tel\xe9fono"})]}),0===O&&(0,M.jsxs)(s.A,{children:[(0,M.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{ae(""),re(!0),await t(H,T),a("/dashboard")}catch(ee){"auth/user-not-found"===ee.code?ae("Usuario no encontrado. Por favor reg\xedstrate primero."):"auth/wrong-password"===ee.code?ae("Contrase\xf1a incorrecta."):ae(ee.message)}finally{re(!1)}},children:[(0,M.jsx)(x.A,{fullWidth:!0,label:"Correo electr\xf3nico",type:"email",value:H,onChange:e=>P(e.target.value),required:!0,disabled:te,sx:{mb:2},InputProps:{startAdornment:(0,M.jsx)(p.A,{position:"start",children:(0,M.jsx)(w.A,{color:"action"})})}}),(0,M.jsx)(x.A,{fullWidth:!0,label:"Contrase\xf1a",type:R?"text":"password",value:T,onChange:e=>q(e.target.value),required:!0,disabled:te,sx:{mb:2},InputProps:{endAdornment:(0,M.jsx)(p.A,{position:"end",children:(0,M.jsx)(m.A,{onClick:()=>U(!R),edge:"end",children:R?(0,M.jsx)(W.A,{}):(0,M.jsx)(S.A,{})})})}}),(0,M.jsx)(b.A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:te,sx:{mb:2},children:te?(0,M.jsx)(A.A,{size:24,color:"inherit"}):"Iniciar Sesi\xf3n"})]}),(0,M.jsx)(s.A,{sx:{textAlign:"center",mb:2},children:(0,M.jsx)(o.N_,{to:"/forgot-password",style:{textDecoration:"none"},children:(0,M.jsx)(d.A,{variant:"body2",color:"primary",children:"\xbfOlvidaste tu contrase\xf1a?"})})})]}),1===O&&(0,M.jsx)(s.A,{children:"input"===oe?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(x.A,{fullWidth:!0,label:"N\xfamero de tel\xe9fono",placeholder:"5512345678",value:L,onChange:e=>_(e.target.value),disabled:te,sx:{mb:2},InputProps:{startAdornment:(0,M.jsx)(p.A,{position:"start",children:(0,M.jsx)(d.A,{color:"text.secondary",children:"+52"})})},helperText:"Ingresa tu n\xfamero de 10 d\xedgitos"}),(0,M.jsx)(b.A,{fullWidth:!0,variant:"contained",size:"large",onClick:async()=>{try{ae(""),re(!0);let e=L;if(e.startsWith("+")||(e=e.startsWith("52")?"+"+e:"+52"+e),!J)throw new Error("reCAPTCHA no est\xe1 configurado");const a=await(0,D.zN)(e,J);Z(a),ne("verify")}catch(ee){"auth/invalid-phone-number"===ee.code?ae("N\xfamero de tel\xe9fono inv\xe1lido. Usa formato: 5512345678"):"auth/too-many-requests"===ee.code?ae("Demasiados intentos. Por favor intenta m\xe1s tarde."):ae(ee.message);const a=(0,D.zE)("recaptcha-container");K(a)}finally{re(!1)}},disabled:te||L.length<10,sx:{mb:2},children:te?(0,M.jsx)(A.A,{size:24,color:"inherit"}):"Enviar c\xf3digo"})]}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(b.A,{startIcon:(0,M.jsx)(C.A,{}),onClick:()=>{ne("input"),V("")},sx:{mb:2},children:"Cambiar n\xfamero"}),(0,M.jsx)(x.A,{fullWidth:!0,label:"C\xf3digo de verificaci\xf3n",placeholder:"123456",value:G,onChange:e=>V(e.target.value),disabled:te,sx:{mb:2},helperText:"Ingresa el c\xf3digo de 6 d\xedgitos enviado a tu tel\xe9fono"}),(0,M.jsx)(b.A,{fullWidth:!0,variant:"contained",size:"large",onClick:async()=>{try{if(ae(""),re(!0),!F)throw new Error("No hay verificaci\xf3n pendiente");const e=(await F.confirm(G)).user;(await(0,I.x7)((0,I.H9)(D.db,"users",e.uid))).exists()?a("/dashboard"):($(e),X(!0))}catch(ee){"auth/invalid-verification-code"===ee.code?ae("C\xf3digo de verificaci\xf3n incorrecto."):ae(ee.message)}finally{re(!1)}},disabled:te||G.length<6,sx:{mb:2},children:te?(0,M.jsx)(A.A,{size:24,color:"inherit"}):"Verificar"})]})}),(0,M.jsx)(j.A,{sx:{my:3},children:"O"}),(0,M.jsx)(b.A,{fullWidth:!0,variant:"outlined",size:"large",startIcon:(0,M.jsx)(N.A,{}),onClick:async()=>{try{ae(""),re(!0);const e=(await(0,D.G6)()).user;(await(0,I.x7)((0,I.H9)(D.db,"users",e.uid))).exists()?a("/dashboard"):($(e),X(!0))}catch(ee){"auth/popup-closed-by-user"===ee.code?ae("Inicio de sesi\xf3n cancelado."):ae(ee.message)}finally{re(!1)}},disabled:te,sx:{mb:2,borderColor:"#4285f4",color:"#4285f4","&:hover":{borderColor:"#357ae8",backgroundColor:"rgba(66, 133, 244, 0.04)"}},children:"Continuar con Google"}),(0,M.jsx)(s.A,{sx:{textAlign:"center",mt:2},children:(0,M.jsxs)(d.A,{variant:"body2",children:["\xbfNo tienes cuenta?"," ",(0,M.jsx)(o.N_,{to:"/register",style:{textDecoration:"none"},children:(0,M.jsx)(d.A,{component:"span",color:"primary",fontWeight:"bold",children:"Reg\xedstrate aqu\xed"})})]})})]})}),(0,M.jsx)("div",{id:"recaptcha-container"}),(0,M.jsxs)(g.A,{open:Q,maxWidth:"sm",fullWidth:!0,children:[(0,M.jsx)(v.A,{children:(0,M.jsx)(d.A,{variant:"h5",fontWeight:"bold",children:"\xbfC\xf3mo quieres usar DOOM?"})}),(0,M.jsxs)(f.A,{children:[(0,M.jsx)(d.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Selecciona tu perfil para personalizar tu experiencia"}),(0,M.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,M.jsxs)(l.A,{elevation:2,sx:{p:3,cursor:"pointer",border:"2px solid transparent","&:hover":{borderColor:"primary.main",backgroundColor:"action.hover"}},onClick:()=>ie("worker"),children:[(0,M.jsx)(d.A,{variant:"h6",fontWeight:"bold",color:"primary",children:"Soy Trabajador"}),(0,M.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Busco oportunidades de empleo para el Mundial 2026"})]}),(0,M.jsxs)(l.A,{elevation:2,sx:{p:3,cursor:"pointer",border:"2px solid transparent","&:hover":{borderColor:"secondary.main",backgroundColor:"action.hover"}},onClick:()=>ie("employer"),children:[(0,M.jsx)(d.A,{variant:"h6",fontWeight:"bold",color:"secondary",children:"Soy Empleador"}),(0,M.jsx)(d.A,{variant:"body2",color:"text.secondary",children:"Busco contratar trabajadores calificados"})]})]})]}),(0,M.jsx)(y.A,{children:(0,M.jsx)(b.A,{onClick:()=>X(!1),disabled:te,children:"Cancelar"})})]})]})}},3632:(e,a,t)=>{t.d(a,{A:()=>n});var r=t(6734),o=t(579);const n=(0,r.A)((0,o.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")}}]);
//# sourceMappingURL=627.f568c4a8.chunk.js.map