"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[648],{648:(e,s,i)=>{i.r(s),i.d(s,{default:()=>N});var t=i(5043),a=i(9981),n=i(9252),r=i(1637),o=i(6446),l=i(5865),c=i(8903),d=i(2110),x=i(6494),h=i(1045),A=i(3336),j=i(1906),m=i(5721),p=i(5537),y=i(2050),b=i(8734),g=i(611),u=i(6240),v=i(9540),f=i(5846),C=i(5337),k=i(751),w=i(4770),G=i(3374),R=i(5978),W=i(5155),E=i(5136),I=i(2607),z=i(9509),M=i(6667),J=i(8836),B=i(9066),P=i(6058),S=i(7304),D=i(579);S.t1.register(S.PP,S.kc,S.FN,S.No,S.E8,S.Bs,S.hE,S.m_,S.s$,S.dN);const N=()=>{const e=(0,a.Zp)(),s=(0,u.A)(),{currentUser:i,userData:S}=(0,B.A)(),[N,T]=(0,t.useState)(!0),[U,O]=(0,t.useState)({totalWorkers:0,totalEmployers:0,totalJobs:0,activeJobs:0,totalApplications:0,totalCertifications:0,verifiedCompanies:0,blockedUsers:0,todayRegistrations:0,weeklyGrowth:0}),[_,V]=(0,t.useState)([]);(0,t.useEffect)(()=>{"admin"===(null===S||void 0===S?void 0:S.role)?Z():e("/")},[S,e]);const Z=async()=>{try{T(!0);const[e,s,i,t,a]=await Promise.all([(0,M.GG)((0,M.rJ)(J.db,"workers")),(0,M.GG)((0,M.rJ)(J.db,"employers")),(0,M.GG)((0,M.rJ)(J.db,"jobs")),(0,M.GG)((0,M.P)((0,M.rJ)(J.db,"jobs"),(0,M._M)("status","==","open"))),(0,M.GG)((0,M.rJ)(J.db,"applications"))]),n=new Date;n.setHours(0,0,0,0);const r=await(0,M.GG)((0,M.rJ)(J.db,"users"));let o=0;r.forEach(e=>{var s;(null===(s=e.data().createdAt)||void 0===s?void 0:s.toDate())>=n&&o++}),O({totalWorkers:e.size,totalEmployers:s.size,totalJobs:i.size,activeJobs:t.size,totalApplications:a.size,totalCertifications:6,verifiedCompanies:Math.floor(.3*s.size),blockedUsers:0,todayRegistrations:o,weeklyGrowth:15.3}),V([{type:"registration",user:"Juan P\xe9rez",time:"5 minutos",icon:(0,D.jsx)(W.A,{}),color:"primary"},{type:"job",company:"Hotel Camino Real",title:"Mesero",time:"15 minutos",icon:(0,D.jsx)(z.A,{}),color:"success"},{type:"certification",user:"Mar\xeda Gonz\xe1lez",cert:"Ingl\xe9s B\xe1sico",time:"1 hora",icon:(0,D.jsx)(E.A,{}),color:"info"},{type:"application",user:"Carlos Ruiz",job:"Bartender",time:"2 horas",icon:(0,D.jsx)(C.A,{}),color:"warning"},{type:"verification",company:"Restaurante El Cardenal",time:"3 horas",icon:(0,D.jsx)(I.A,{}),color:"success"}])}catch(e){console.error("Error fetching dashboard data:",e)}finally{T(!1)}},H={labels:["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"],datasets:[{label:"Trabajadores",data:[12,19,15,25,22,30,28],borderColor:s.palette.primary.main,backgroundColor:s.palette.primary.light,fill:!0,tension:.4},{label:"Empleadores",data:[5,8,6,10,9,12,11],borderColor:s.palette.secondary.main,backgroundColor:s.palette.secondary.light,fill:!0,tension:.4}]},L={labels:["Meseros","Cocineros","Seguridad","Limpieza","Conductores","Otros"],datasets:[{data:[35,25,20,15,10,15],backgroundColor:[s.palette.primary.main,s.palette.secondary.main,s.palette.success.main,s.palette.warning.main,s.palette.info.main,s.palette.error.main]}]},q={labels:["Pendientes","Aceptadas","Rechazadas"],datasets:[{label:"Aplicaciones",data:[150,89,45],backgroundColor:[s.palette.warning.main,s.palette.success.main,s.palette.error.main]}]};return N?(0,D.jsx)(n.A,{maxWidth:"xl",sx:{py:4,textAlign:"center"},children:(0,D.jsx)(r.A,{})}):(0,D.jsxs)(n.A,{maxWidth:"xl",sx:{py:4},children:[(0,D.jsxs)(o.A,{mb:4,children:[(0,D.jsx)(l.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Panel de Administraci\xf3n - Alcald\xeda \xc1lvaro Obreg\xf3n"}),(0,D.jsx)(l.A,{variant:"subtitle1",color:"text.secondary",children:"Sistema de Gesti\xf3n DOOM - Mundial 2026"})]}),(0,D.jsxs)(c.Ay,{container:!0,spacing:3,sx:{mb:4},children:[(0,D.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,D.jsx)(d.A,{sx:{bgcolor:"primary.light"},children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h4",fontWeight:"bold",children:U.totalWorkers}),(0,D.jsx)(l.A,{variant:"body2",children:"Trabajadores"})]}),(0,D.jsx)(h.A,{sx:{bgcolor:"primary.main"},children:(0,D.jsx)(W.A,{})})]}),(0,D.jsxs)(o.A,{display:"flex",alignItems:"center",mt:1,children:[(0,D.jsx)(v.A,{fontSize:"small",color:"success"}),(0,D.jsxs)(l.A,{variant:"caption",color:"success.main",children:["+",U.weeklyGrowth,"% esta semana"]})]})]})})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,D.jsx)(d.A,{sx:{bgcolor:"secondary.light"},children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h4",fontWeight:"bold",children:U.totalEmployers}),(0,D.jsx)(l.A,{variant:"body2",children:"Empleadores"})]}),(0,D.jsx)(h.A,{sx:{bgcolor:"secondary.main"},children:(0,D.jsx)(w.A,{})})]}),(0,D.jsxs)(o.A,{display:"flex",alignItems:"center",mt:1,children:[(0,D.jsx)(I.A,{fontSize:"small",color:"success"}),(0,D.jsxs)(l.A,{variant:"caption",children:[U.verifiedCompanies," verificados"]})]})]})})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,D.jsx)(d.A,{sx:{bgcolor:"success.light"},children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h4",fontWeight:"bold",children:U.activeJobs}),(0,D.jsx)(l.A,{variant:"body2",children:"Trabajos Activos"})]}),(0,D.jsx)(h.A,{sx:{bgcolor:"success.main"},children:(0,D.jsx)(z.A,{})})]}),(0,D.jsx)(o.A,{display:"flex",alignItems:"center",mt:1,children:(0,D.jsxs)(l.A,{variant:"caption",color:"text.secondary",children:["De ",U.totalJobs," totales"]})})]})})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,D.jsx)(d.A,{sx:{bgcolor:"warning.light"},children:(0,D.jsxs)(x.A,{children:[(0,D.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h4",fontWeight:"bold",children:U.totalApplications}),(0,D.jsx)(l.A,{variant:"body2",children:"Aplicaciones"})]}),(0,D.jsx)(h.A,{sx:{bgcolor:"warning.main"},children:(0,D.jsx)(C.A,{})})]}),(0,D.jsx)(o.A,{display:"flex",alignItems:"center",mt:1,children:(0,D.jsxs)(l.A,{variant:"caption",children:[U.todayRegistrations," hoy"]})})]})})})]}),(0,D.jsxs)(A.A,{sx:{p:3,mb:4},children:[(0,D.jsx)(l.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Acciones R\xe1pidas"}),(0,D.jsxs)(c.Ay,{container:!0,spacing:2,children:[(0,D.jsx)(c.Ay,{item:!0,children:(0,D.jsx)(j.A,{variant:"contained",startIcon:(0,D.jsx)(W.A,{}),onClick:()=>e("/admin/users"),children:"Gestionar Usuarios"})}),(0,D.jsx)(c.Ay,{item:!0,children:(0,D.jsx)(j.A,{variant:"contained",color:"secondary",startIcon:(0,D.jsx)(E.A,{}),onClick:()=>e("/admin/certifications"),children:"Gestionar Certificaciones"})}),(0,D.jsx)(c.Ay,{item:!0,children:(0,D.jsx)(j.A,{variant:"contained",color:"success",startIcon:(0,D.jsx)(w.A,{}),onClick:()=>e("/admin/companies"),children:"Verificar Empresas"})}),(0,D.jsx)(c.Ay,{item:!0,children:(0,D.jsx)(j.A,{variant:"outlined",startIcon:(0,D.jsx)(f.A,{}),onClick:()=>e("/admin/reports"),children:"Ver Reportes"})}),(0,D.jsx)(c.Ay,{item:!0,children:(0,D.jsxs)(j.A,{variant:"outlined",color:"error",startIcon:(0,D.jsx)(k.A,{}),onClick:()=>e("/admin/blocked"),children:["Usuarios Bloqueados (",U.blockedUsers,")"]})}),(0,D.jsx)(c.Ay,{item:!0,children:(0,D.jsx)(j.A,{variant:"outlined",color:"info",startIcon:(0,D.jsx)(G.A,{}),onClick:()=>e("/admin/seed"),children:"Datos de Prueba"})})]})]}),(0,D.jsxs)(c.Ay,{container:!0,spacing:3,children:[(0,D.jsx)(c.Ay,{item:!0,xs:12,md:8,children:(0,D.jsxs)(A.A,{sx:{p:3},children:[(0,D.jsx)(l.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Tendencia de Registros - \xdaltima Semana"}),(0,D.jsx)(o.A,{sx:{height:300},children:(0,D.jsx)(P.N1,{data:H,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})})]})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,D.jsxs)(A.A,{sx:{p:3},children:[(0,D.jsx)(l.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Trabajos por Oficio"}),(0,D.jsx)(o.A,{sx:{height:300},children:(0,D.jsx)(P.nu,{data:L,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})})]})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,D.jsxs)(A.A,{sx:{p:3},children:[(0,D.jsx)(l.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Actividad Reciente"}),(0,D.jsx)(m.A,{children:_.map((e,s)=>(0,D.jsxs)(p.Ay,{divider:s<_.length-1,children:[(0,D.jsx)(y.A,{children:(0,D.jsx)(h.A,{sx:{bgcolor:"".concat(e.color,".light"),width:36,height:36},children:e.icon})}),(0,D.jsx)(b.A,{primary:"registration"===e.type?"Nuevo registro: ".concat(e.user):"job"===e.type?"Nuevo trabajo: ".concat(e.title," - ").concat(e.company):"certification"===e.type?"".concat(e.user," se inscribi\xf3 a ").concat(e.cert):"application"===e.type?"".concat(e.user," aplic\xf3 a ").concat(e.job):"".concat(e.company," fue verificada"),secondary:e.time})]},s))})]})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,D.jsxs)(A.A,{sx:{p:3},children:[(0,D.jsx)(l.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:"Estado de Aplicaciones"}),(0,D.jsx)(o.A,{sx:{height:250},children:(0,D.jsx)(P.yP,{data:q,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})})]})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,children:(0,D.jsxs)(A.A,{sx:{p:3,background:"linear-gradient(135deg, #007A33 0%, #f7991c 100%)",color:"white"},children:[(0,D.jsxs)(o.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h5",fontWeight:"bold",children:"Cuenta Regresiva Mundial 2026"}),(0,D.jsx)(l.A,{variant:"h3",fontWeight:"bold",sx:{mt:1},children:"542 d\xedas"}),(0,D.jsx)(l.A,{variant:"subtitle1",children:"para el inicio del Mundial en M\xe9xico"})]}),(0,D.jsx)(R.A,{sx:{fontSize:80,opacity:.5}})]}),(0,D.jsxs)(c.Ay,{container:!0,spacing:2,sx:{mt:2},children:[(0,D.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h6",children:"Meta de Trabajadores"}),(0,D.jsx)(g.A,{variant:"determinate",value:U.totalWorkers/5e3*100,sx:{height:10,borderRadius:5,mt:1}}),(0,D.jsxs)(l.A,{variant:"caption",children:[U.totalWorkers," / 5,000"]})]})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h6",children:"Meta de Empleadores"}),(0,D.jsx)(g.A,{variant:"determinate",value:U.totalEmployers/500*100,sx:{height:10,borderRadius:5,mt:1}}),(0,D.jsxs)(l.A,{variant:"caption",children:[U.totalEmployers," / 500"]})]})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h6",children:"Meta de Certificaciones"}),(0,D.jsx)(g.A,{variant:"determinate",value:30,sx:{height:10,borderRadius:5,mt:1}}),(0,D.jsx)(l.A,{variant:"caption",children:"1,500 / 5,000"})]})}),(0,D.jsx)(c.Ay,{item:!0,xs:12,md:3,children:(0,D.jsxs)(o.A,{children:[(0,D.jsx)(l.A,{variant:"h6",children:"Preparaci\xf3n General"}),(0,D.jsx)(g.A,{variant:"determinate",value:45,sx:{height:10,borderRadius:5,mt:1}}),(0,D.jsx)(l.A,{variant:"caption",children:"45% Completado"})]})})]})]})})]})]})}}}]);
//# sourceMappingURL=648.7a951971.chunk.js.map