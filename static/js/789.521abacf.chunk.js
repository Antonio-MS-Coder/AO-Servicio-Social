"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[789],{4789:(e,t,a)=>{a.r(t),a.d(t,{default:()=>te});var r=a(2555),o=a(5043),i=a(4117),l=a(9252),n=a(1637),c=a(5865),s=a(7254),d=a(3336),h=a(1045),p=a(1906),u=a(3495),m=a(2143),v=a(8577),x=a(8587),A=a(8168),g=a(8387),b=a(8610),f=a(7266),y=a(6803),w=a(3064),j=a(4535),k=a(8206),C=a(2532),S=a(2372);function E(e){return(0,S.Ay)("MuiSwitch",e)}const R=(0,C.A)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var z=a(579);const N=["className","color","edge","size","sx"],I=(0,j.Ay)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t["edge".concat((0,y.A)(a.edge))],t["size".concat((0,y.A)(a.size))]]}})({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,["& .".concat(R.thumb)]:{width:16,height:16},["& .".concat(R.switchBase)]:{padding:4,["&.".concat(R.checked)]:{transform:"translateX(16px)"}}}}]}),T=(0,j.Ay)(w.A,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{["& .".concat(R.input)]:t.input},"default"!==a.color&&t["color".concat((0,y.A)(a.color))]]}})(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(R.checked)]:{transform:"translateX(20px)"},["&.".concat(R.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(R.checked," + .").concat(R.track)]:{opacity:.5},["&.".concat(R.disabled," + .").concat(R.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(R.input)]:{left:"-100%",width:"300%"}}},e=>{let{theme:t}=e;return{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,f.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(t.palette).filter(e=>{let[,t]=e;return t.main&&t.light}).map(e=>{let[a]=e;return{props:{color:a},style:{["&.".concat(R.checked)]:{color:(t.vars||t).palette[a].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[a].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,f.X4)(t.palette[a].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(R.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(a,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,f.a)(t.palette[a].main,.62):(0,f.e$)(t.palette[a].main,.55))}},["&.".concat(R.checked," + .").concat(R.track)]:{backgroundColor:(t.vars||t).palette[a].main}}}})]}}),D=(0,j.Ay)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}),M=(0,j.Ay)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}),B=o.forwardRef(function(e,t){const a=(0,k.b)({props:e,name:"MuiSwitch"}),{className:r,color:o="primary",edge:i=!1,size:l="medium",sx:n}=a,c=(0,x.A)(a,N),s=(0,A.A)({},a,{color:o,edge:i,size:l}),d=(e=>{const{classes:t,edge:a,size:r,color:o,checked:i,disabled:l}=e,n={root:["root",a&&"edge".concat((0,y.A)(a)),"size".concat((0,y.A)(r))],switchBase:["switchBase","color".concat((0,y.A)(o)),i&&"checked",l&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},c=(0,b.A)(n,E,t);return(0,A.A)({},t,c)})(s),h=(0,z.jsx)(M,{className:d.thumb,ownerState:s});return(0,z.jsxs)(I,{className:(0,g.A)(d.root,r),sx:n,ownerState:s,children:[(0,z.jsx)(T,(0,A.A)({type:"checkbox",icon:h,checkedIcon:h,ref:t,ownerState:s},c,{classes:(0,A.A)({},d,{root:d.switchBase})})),(0,z.jsx)(D,{className:d.track,ownerState:s})]})});var H=a(6446),O=a(5721),U=a(5537),W=a(8734),L=a(3845),P=a(8266),V=a(7392),F=a(8903),G=a(6734);const X=(0,G.A)([(0,z.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,z.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera"),K=(0,G.A)((0,z.jsx)("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"}),"Upload");var q=a(8606);const _=(0,G.A)((0,z.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Y=(0,G.A)((0,z.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var Z=a(6667),$=a(6068),J=a(8836),Q=a(9066),ee=a(6892);const te=()=>{var e;const{t:t}=(0,i.Bd)(),{currentUser:a,userData:x}=(0,Q.A)(),[A,g]=(0,o.useState)(!0),[b,f]=(0,o.useState)(!1),[y,w]=(0,o.useState)(null),[j,k]=(0,o.useState)({name:"",trade:ee.h.OTHER,experience:0,location:"",bio:"",available:!0,certifications:[]}),[C,S]=(0,o.useState)({companyName:"",contactName:"",businessType:"",location:"",description:""});(0,o.useEffect)(()=>{a&&E()},[a]);const E=async()=>{try{const e="worker"===(null===x||void 0===x?void 0:x.role)?"workers":"employers",t=await(0,Z.x7)((0,Z.H9)(J.db,e,a.uid));if(t.exists()){const e=t.data();"worker"===(null===x||void 0===x?void 0:x.role)?k(e):S(e)}}catch(e){console.error("Error fetching profile:",e),w({type:"error",text:"Error al cargar el perfil"})}finally{g(!1)}};return A?(0,z.jsx)(l.A,{maxWidth:"md",sx:{py:4,textAlign:"center"},children:(0,z.jsx)(n.A,{})}):(0,z.jsxs)(l.A,{maxWidth:"md",sx:{py:4},children:[(0,z.jsx)(c.A,{variant:"h4",gutterBottom:!0,children:t("nav.profile")}),y&&(0,z.jsx)(s.A,{severity:y.type,sx:{mb:2},onClose:()=>w(null),children:y.text}),(0,z.jsx)(d.A,{sx:{p:3,mb:3},children:(0,z.jsxs)(F.Ay,{container:!0,spacing:3,children:[(0,z.jsxs)(F.Ay,{item:!0,xs:12,md:4,sx:{textAlign:"center"},children:[(0,z.jsx)(h.A,{src:"worker"===(null===x||void 0===x?void 0:x.role)?j.photoUrl:C.logoUrl,sx:{width:150,height:150,mx:"auto",mb:2}}),(0,z.jsx)("input",{accept:"image/*",type:"file",id:"photo-upload",hidden:!0,onChange:async e=>{if(e.target.files&&e.target.files[0]){const o=e.target.files[0],i=(0,$.KR)(J.IG,"profile-photos/".concat(a.uid));try{f(!0);const e=await(0,$.D)(i,o),t=await(0,$.qk)(e.ref);"worker"===(null===x||void 0===x?void 0:x.role)?k((0,r.A)((0,r.A)({},j),{},{photoUrl:t})):S((0,r.A)((0,r.A)({},C),{},{logoUrl:t})),w({type:"success",text:"Foto actualizada"})}catch(t){console.error("Error uploading photo:",t),w({type:"error",text:"Error al subir la foto"})}finally{f(!1)}}}}),(0,z.jsx)("label",{htmlFor:"photo-upload",children:(0,z.jsx)(p.A,{variant:"outlined",component:"span",startIcon:(0,z.jsx)(X,{}),disabled:b,children:t("profile.uploadPhoto")})})]}),(0,z.jsxs)(F.Ay,{item:!0,xs:12,md:8,children:["worker"===(null===x||void 0===x?void 0:x.role)?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(u.A,{fullWidth:!0,label:t("profile.name"),value:j.name,onChange:e=>k((0,r.A)((0,r.A)({},j),{},{name:e.target.value})),sx:{mb:2}}),(0,z.jsx)(u.A,{fullWidth:!0,select:!0,label:t("profile.trade"),value:j.trade,onChange:e=>k((0,r.A)((0,r.A)({},j),{},{trade:e.target.value})),sx:{mb:2},children:Object.values(ee.h).map(e=>(0,z.jsx)(m.A,{value:e,children:t("trades.".concat(e))},e))}),(0,z.jsx)(u.A,{fullWidth:!0,type:"number",label:t("profile.experience"),value:j.experience,onChange:e=>k((0,r.A)((0,r.A)({},j),{},{experience:parseInt(e.target.value)})),sx:{mb:2}}),(0,z.jsx)(v.A,{control:(0,z.jsx)(B,{checked:j.available,onChange:e=>k((0,r.A)((0,r.A)({},j),{},{available:e.target.checked}))}),label:j.available?t("profile.available"):t("profile.notAvailable"),sx:{mb:2}})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(u.A,{fullWidth:!0,label:"Nombre de la Empresa",value:C.companyName,onChange:e=>S((0,r.A)((0,r.A)({},C),{},{companyName:e.target.value})),sx:{mb:2}}),(0,z.jsx)(u.A,{fullWidth:!0,label:"Nombre del Contacto",value:C.contactName,onChange:e=>S((0,r.A)((0,r.A)({},C),{},{contactName:e.target.value})),sx:{mb:2}}),(0,z.jsx)(u.A,{fullWidth:!0,label:"Tipo de Negocio",value:C.businessType,onChange:e=>S((0,r.A)((0,r.A)({},C),{},{businessType:e.target.value})),sx:{mb:2}})]}),(0,z.jsx)(u.A,{fullWidth:!0,label:t("profile.location"),value:"worker"===(null===x||void 0===x?void 0:x.role)?j.location:C.location,onChange:e=>{"worker"===(null===x||void 0===x?void 0:x.role)?k((0,r.A)((0,r.A)({},j),{},{location:e.target.value})):S((0,r.A)((0,r.A)({},C),{},{location:e.target.value}))},sx:{mb:2}}),(0,z.jsx)(u.A,{fullWidth:!0,multiline:!0,rows:4,label:t("profile.bio"),value:"worker"===(null===x||void 0===x?void 0:x.role)?j.bio:C.description,onChange:e=>{"worker"===(null===x||void 0===x?void 0:x.role)?k((0,r.A)((0,r.A)({},j),{},{bio:e.target.value})):S((0,r.A)((0,r.A)({},C),{},{description:e.target.value}))}})]})]})}),"worker"===(null===x||void 0===x?void 0:x.role)&&(0,z.jsxs)(d.A,{sx:{p:3,mb:3},children:[(0,z.jsxs)(H.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,z.jsx)(c.A,{variant:"h6",children:t("profile.certifications")}),(0,z.jsx)("input",{accept:".pdf,.jpg,.jpeg,.png",type:"file",id:"cert-upload",hidden:!0,onChange:async e=>{if(e.target.files&&e.target.files[0]&&"worker"===(null===x||void 0===x?void 0:x.role)){const o=e.target.files[0],i=Date.now().toString(),l=(0,$.KR)(J.IG,"certifications/".concat(a.uid,"/").concat(i));try{f(!0);const e=await(0,$.D)(l,o),t=await(0,$.qk)(e.ref),a={id:i,name:o.name,issuer:"",issueDate:new Date,fileUrl:t,verified:!1},n=[...j.certifications||[],a];k((0,r.A)((0,r.A)({},j),{},{certifications:n})),w({type:"success",text:"Certificaci\xf3n agregada"})}catch(t){console.error("Error uploading certification:",t),w({type:"error",text:"Error al subir la certificaci\xf3n"})}finally{f(!1)}}}}),(0,z.jsx)("label",{htmlFor:"cert-upload",children:(0,z.jsx)(p.A,{variant:"outlined",component:"span",startIcon:(0,z.jsx)(K,{}),disabled:b,children:t("profile.uploadCertification")})})]}),(0,z.jsx)(O.A,{children:null===(e=j.certifications)||void 0===e?void 0:e.map(e=>(0,z.jsxs)(U.Ay,{children:[(0,z.jsx)(W.A,{primary:e.name,secondary:e.issuer||"Sin emisor"}),e.verified&&(0,z.jsx)(L.A,{icon:(0,z.jsx)(q.A,{}),label:"Verificado",color:"success",size:"small",sx:{mr:2}}),(0,z.jsx)(P.A,{children:(0,z.jsx)(V.A,{edge:"end","aria-label":"delete",children:(0,z.jsx)(_,{})})})]},e.id))})]}),(0,z.jsx)(H.A,{sx:{display:"flex",justifyContent:"flex-end"},children:(0,z.jsx)(p.A,{variant:"contained",size:"large",startIcon:(0,z.jsx)(Y,{}),onClick:async()=>{try{f(!0);const e="worker"===(null===x||void 0===x?void 0:x.role)?"workers":"employers",o="worker"===(null===x||void 0===x?void 0:x.role)?j:C;await(0,Z.mZ)((0,Z.H9)(J.db,e,a.uid),(0,r.A)((0,r.A)({},o),{},{updatedAt:new Date})),w({type:"success",text:t("messages.profileUpdated")})}catch(e){console.error("Error saving profile:",e),w({type:"error",text:"Error al guardar el perfil"})}finally{f(!1)}},disabled:b,children:b?(0,z.jsx)(n.A,{size:24}):t("actions.save")})})]})}},6892:(e,t,a)=>{a.d(t,{h:()=>r});let r=function(e){return e.WAITER="waiter",e.COOK="cook",e.BARTENDER="bartender",e.CLEANER="cleaner",e.SECURITY="security",e.DRIVER="driver",e.TRANSLATOR="translator",e.GUIDE="guide",e.ELECTRICIAN="electrician",e.PLUMBER="plumber",e.CARPENTER="carpenter",e.PAINTER="painter",e.GARDENER="gardener",e.TECHNICIAN="technician",e.OTHER="other",e}({})},8606:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(6734),o=a(579);const i=(0,r.A)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")}}]);
//# sourceMappingURL=789.521abacf.chunk.js.map