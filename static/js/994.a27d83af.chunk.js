"use strict";(self.webpackChunkdoom_mvp=self.webpackChunkdoom_mvp||[]).push([[994],{6892:(e,a,r)=>{r.d(a,{h:()=>i});let i=function(e){return e.WAITER="waiter",e.COOK="cook",e.BARTENDER="bartender",e.CLEANER="cleaner",e.SECURITY="security",e.DRIVER="driver",e.TRANSLATOR="translator",e.GUIDE="guide",e.ELECTRICIAN="electrician",e.PLUMBER="plumber",e.CARPENTER="carpenter",e.PAINTER="painter",e.GARDENER="gardener",e.TECHNICIAN="technician",e.OTHER="other",e}({})},7994:(e,a,r)=>{r.r(a),r.d(a,{default:()=>ee});var i=r(2555),s=r(45),l=r(5043),n=r(4117),t=r(9981),o=r(6446),d=r(9252),c=r(1637),p=r(5865),u=r(2110),h=r(6494),x=r(7254),A=r(3336),m=r(4669),j=r(4056),g=r(1045),b=r(1906),y=r(3495),f=r(2143),v=r(1787),C=r(9336),k=r(3845),I=r(4605),E=r(4598),T=r(9413),R=r(1962),w=r(8911),P=r(8903),S=r(8606),O=r(7483),W=r(8262),B=r(9075),D=r(1082),z=r(9893),M=r(9974),N=r(2429),H=r(6687),_=r(7141),q=r(1209),F=r(5136),G=r(853),L=r(9044),U=r(5298),$=r(6667),Z=r(6068),J=r(8836),K=r(9066),V=r(6892),X=r(579);const Y=["children","value","index"];function Q(e){const{children:a,value:r,index:l}=e,n=(0,s.A)(e,Y);return(0,X.jsx)("div",(0,i.A)((0,i.A)({role:"tabpanel",hidden:r!==l,id:"profile-tabpanel-".concat(l)},n),{},{children:r===l&&(0,X.jsx)(o.A,{sx:{p:3},children:a})}))}const ee=()=>{var e;const{t:a}=(0,n.Bd)(),r=(0,t.Zp)(),{currentUser:s,userData:Y}=(0,K.A)(),[ee,ae]=(0,l.useState)(!0),[re,ie]=(0,l.useState)(!1),[se,le]=(0,l.useState)(null),[ne,te]=(0,l.useState)(0),[oe,de]=(0,l.useState)(0),[ce,pe]=(0,l.useState)({userId:"",name:"",trade:V.h.OTHER,secondaryTrades:[],experience:0,location:"",bio:"",available:!0,certifications:[],rating:0,totalRatings:0,photoUrl:"",phone:"",email:"",whatsapp:"",hourlyRate:0,skills:[],languages:[],availability:{monday:!0,tuesday:!0,wednesday:!0,thursday:!0,friday:!0,saturday:!0,sunday:!1},preferredAreas:[]}),ue=[{id:"food_handling",name:"Manejo Higi\xe9nico de Alimentos",provider:"COFEPRIS",duration:"8 horas",price:"Gratis",icon:(0,X.jsx)(H.A,{}),description:"Certificaci\xf3n obligatoria para trabajar en restaurantes y bares"},{id:"first_aid",name:"Primeros Auxilios B\xe1sicos",provider:"Cruz Roja",duration:"16 horas",price:"$500",icon:(0,X.jsx)(B.A,{}),description:"Aprende a responder en emergencias m\xe9dicas"},{id:"security_guard",name:"Guardia de Seguridad",provider:"SSP CDMX",duration:"40 horas",price:"$1,200",icon:(0,X.jsx)(G.A,{}),description:"Certificaci\xf3n para trabajar en seguridad privada"},{id:"english_basic",name:"Ingl\xe9s B\xe1sico para Turismo",provider:"DOOM Academy",duration:"30 horas",price:"Gratis",icon:(0,X.jsx)(L.A,{}),description:"Frases esenciales en ingl\xe9s para atender turistas"},{id:"cleaning_professional",name:"Limpieza Profesional",provider:"ISSA M\xe9xico",duration:"20 horas",price:"$800",icon:(0,X.jsx)(O.A,{}),description:"T\xe9cnicas profesionales de limpieza e higiene"},{id:"bartender_basic",name:"Bartender B\xe1sico",provider:"Asociaci\xf3n Mexicana de Bartenders",duration:"24 horas",price:"$1,500",icon:(0,X.jsx)(H.A,{}),description:"Cocteler\xeda b\xe1sica y servicio de bar"}];(0,l.useEffect)(()=>{s&&"worker"===(null===Y||void 0===Y?void 0:Y.role)?he():"worker"!==(null===Y||void 0===Y?void 0:Y.role)&&r("/profile")},[s,Y,r]),(0,l.useEffect)(()=>{xe()},[ce]);const he=async()=>{try{ae(!0);const e=await(0,$.x7)((0,$.H9)(J.db,"workers",s.uid));if(e.exists()){const a=e.data();pe((0,i.A)((0,i.A)((0,i.A)({},ce),a),{},{email:a.email||(null===Y||void 0===Y?void 0:Y.email)||"",name:a.name||(null===Y||void 0===Y?void 0:Y.displayName)||""}))}else{const e=(0,i.A)((0,i.A)({},ce),{},{userId:s.uid,name:(null===Y||void 0===Y?void 0:Y.displayName)||"",email:(null===Y||void 0===Y?void 0:Y.email)||"",createdAt:new Date,updatedAt:new Date});await(0,$.BN)((0,$.H9)(J.db,"workers",s.uid),e),pe(e)}}catch(e){console.error("Error fetching profile:",e),le({type:"error",text:"Error al cargar el perfil"})}finally{ae(!1)}},xe=()=>{let e=0;[ce.name,ce.photoUrl,ce.trade!==V.h.OTHER,ce.experience>0,ce.location,ce.bio,ce.phone||ce.whatsapp,ce.skills.length>0,ce.hourlyRate>0,ce.preferredAreas.length>0].forEach(a=>{a&&(e+=10)}),de(e)};return ee?(0,X.jsxs)(d.A,{maxWidth:"lg",sx:{py:4,textAlign:"center"},children:[(0,X.jsx)(c.A,{}),(0,X.jsx)(p.A,{sx:{mt:2},children:"Cargando perfil..."})]}):(0,X.jsxs)(d.A,{maxWidth:"lg",sx:{py:4},children:[(0,X.jsx)(p.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Mi Perfil de Trabajador"}),(0,X.jsx)(u.A,{sx:{mb:3,bgcolor:oe>=80?"success.light":"warning.light"},children:(0,X.jsx)(h.A,{children:(0,X.jsxs)(o.A,{display:"flex",alignItems:"center",gap:3,children:[(0,X.jsx)(c.A,{variant:"determinate",value:oe,size:80,thickness:5,sx:{color:oe>=80?"success.main":oe>=50?"warning.main":"error.main"}}),(0,X.jsxs)(o.A,{flex:1,children:[(0,X.jsxs)(p.A,{variant:"h6",children:["Tu perfil est\xe1 ",oe,"% completo"]}),(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",children:oe<100?"Completa tu perfil para tener m\xe1s oportunidades de trabajo":"\xa1Excelente! Tu perfil est\xe1 completo"})]})]})})}),se&&(0,X.jsx)(x.A,{severity:se.type,sx:{mb:3},onClose:()=>le(null),children:se.text}),(0,X.jsxs)(A.A,{children:[(0,X.jsxs)(m.A,{value:ne,onChange:(e,a)=>te(a),sx:{borderBottom:1,borderColor:"divider"},children:[(0,X.jsx)(j.A,{label:"Informaci\xf3n Personal"}),(0,X.jsx)(j.A,{label:"Habilidades"}),(0,X.jsx)(j.A,{label:"Certificaciones"}),(0,X.jsx)(j.A,{label:"Disponibilidad"})]}),(0,X.jsx)(Q,{value:ne,index:0,children:(0,X.jsxs)(P.Ay,{container:!0,spacing:3,children:[(0,X.jsxs)(P.Ay,{item:!0,xs:12,md:4,textAlign:"center",children:[(0,X.jsx)(g.A,{src:ce.photoUrl,sx:{width:150,height:150,mx:"auto",mb:2},children:(null===(e=ce.name)||void 0===e?void 0:e[0])||(0,X.jsx)(z.A,{})}),(0,X.jsx)("input",{accept:"image/*",type:"file",id:"photo-upload",hidden:!0,onChange:async e=>{if(e.target.files&&e.target.files[0]){const r=e.target.files[0],l=(0,Z.KR)(J.IG,"profile-photos/".concat(s.uid));try{ie(!0);const e=await(0,Z.D)(l,r),a=await(0,Z.qk)(e.ref);pe((0,i.A)((0,i.A)({},ce),{},{photoUrl:a})),le({type:"success",text:"Foto actualizada correctamente"})}catch(a){console.error("Error uploading photo:",a),le({type:"error",text:"Error al subir la foto"})}finally{ie(!1)}}}}),(0,X.jsx)("label",{htmlFor:"photo-upload",children:(0,X.jsx)(b.A,{variant:"outlined",component:"span",startIcon:(0,X.jsx)(N.A,{}),disabled:re,fullWidth:!0,children:"Subir Foto"})}),(0,X.jsx)(p.A,{variant:"caption",display:"block",sx:{mt:1},children:"* Una buena foto aumenta tus oportunidades"})]}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:8,children:(0,X.jsxs)(P.Ay,{container:!0,spacing:2,children:[(0,X.jsx)(P.Ay,{item:!0,xs:12,children:(0,X.jsx)(y.A,{fullWidth:!0,label:"Nombre Completo",value:ce.name,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{name:e.target.value})),required:!0,error:!ce.name,helperText:ce.name?"":"Campo requerido"})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,X.jsx)(y.A,{fullWidth:!0,select:!0,label:"Oficio Principal",value:ce.trade,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{trade:e.target.value})),required:!0,error:ce.trade===V.h.OTHER,helperText:ce.trade===V.h.OTHER?"Selecciona tu oficio principal":"",children:Object.values(V.h).map(e=>(0,X.jsx)(f.A,{value:e,children:a("trades.".concat(e))},e))})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,X.jsx)(y.A,{fullWidth:!0,type:"number",label:"A\xf1os de Experiencia",value:ce.experience,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{experience:parseInt(e.target.value)||0})),InputProps:{inputProps:{min:0,max:50}}})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,X.jsx)(y.A,{fullWidth:!0,label:"Ubicaci\xf3n (Colonia)",value:ce.location,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{location:e.target.value})),placeholder:"Ej: Santa Fe, \xc1lvaro Obreg\xf3n",required:!0,error:!ce.location,helperText:ce.location?"Indica tu colonia en \xc1lvaro Obreg\xf3n":"Campo requerido"})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,X.jsx)(y.A,{fullWidth:!0,label:"Tarifa por Hora",value:ce.hourlyRate||"",onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{hourlyRate:parseFloat(e.target.value)||0})),InputProps:{startAdornment:(0,X.jsx)(v.A,{position:"start",children:"$"})},helperText:"Tu tarifa esperada por hora de trabajo"})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,children:(0,X.jsx)(y.A,{fullWidth:!0,multiline:!0,rows:4,label:"Acerca de m\xed",value:ce.bio,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{bio:e.target.value})),placeholder:"Describe tu experiencia, habilidades especiales y lo que te hace \xfanico...",helperText:"".concat(ce.bio.length,"/500 caracteres"),inputProps:{maxLength:500}})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,children:(0,X.jsx)(C.A,{sx:{my:1},children:(0,X.jsx)(k.A,{label:"Informaci\xf3n de Contacto",size:"small"})})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:4,children:(0,X.jsx)(y.A,{fullWidth:!0,label:"Tel\xe9fono",value:ce.phone,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{phone:e.target.value})),placeholder:"55 1234 5678",InputProps:{startAdornment:(0,X.jsx)(M.A,{sx:{mr:1,color:"action.active"}})}})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:4,children:(0,X.jsx)(y.A,{fullWidth:!0,label:"WhatsApp",value:ce.whatsapp,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{whatsapp:e.target.value})),placeholder:"55 1234 5678",InputProps:{startAdornment:(0,X.jsx)(U.A,{sx:{mr:1,color:"success.main"}})}})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,md:4,children:(0,X.jsx)(y.A,{fullWidth:!0,label:"Email",value:ce.email,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{email:e.target.value})),InputProps:{startAdornment:(0,X.jsx)(W.A,{sx:{mr:1,color:"action.active"}})}})}),(0,X.jsx)(P.Ay,{item:!0,xs:12,children:(0,X.jsx)(I.A,{control:(0,X.jsx)(E.A,{checked:ce.available,onChange:e=>pe((0,i.A)((0,i.A)({},ce),{},{available:e.target.checked})),color:"success"}),label:(0,X.jsx)(o.A,{display:"flex",alignItems:"center",gap:1,children:ce.available?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(S.A,{color:"success"}),(0,X.jsx)(p.A,{children:"Disponible para trabajar"})]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(q.A,{color:"disabled"}),(0,X.jsx)(p.A,{children:"No disponible actualmente"})]})})})})]})})]})}),(0,X.jsxs)(Q,{value:ne,index:1,children:[(0,X.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Selecciona tus habilidades"}),(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Marca todas las habilidades que dominas. Esto ayudar\xe1 a los empleadores a encontrarte."}),(0,X.jsx)(o.A,{display:"flex",flexWrap:"wrap",gap:1,children:["Atenci\xf3n al cliente","Trabajo en equipo","Puntualidad","Responsabilidad","Comunicaci\xf3n efectiva","Resoluci\xf3n de problemas","Manejo de efectivo","Inventario","Limpieza profunda","Protocolos de seguridad","Primeros auxilios","Manejo de alimentos","Cocteler\xeda","Servicio de mesa","Mantenimiento b\xe1sico","Herramientas el\xe9ctricas","Plomer\xeda b\xe1sica","Pintura","Carpinter\xeda","Jardiner\xeda"].map(e=>(0,X.jsx)(k.A,{label:e,onClick:()=>(e=>{ce.skills.includes(e)?pe((0,i.A)((0,i.A)({},ce),{},{skills:ce.skills.filter(a=>a!==e)})):pe((0,i.A)((0,i.A)({},ce),{},{skills:[...ce.skills,e]}))})(e),color:ce.skills.includes(e)?"primary":"default",variant:ce.skills.includes(e)?"filled":"outlined",icon:ce.skills.includes(e)?(0,X.jsx)(S.A,{}):void 0},e))}),(0,X.jsx)(C.A,{sx:{my:3}}),(0,X.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Idiomas"}),(0,X.jsxs)(T.A,{row:!0,children:[(0,X.jsx)(I.A,{control:(0,X.jsx)(R.A,{defaultChecked:!0,disabled:!0}),label:"Espa\xf1ol (Nativo)"}),(0,X.jsx)(I.A,{control:(0,X.jsx)(R.A,{checked:ce.languages.includes("english_basic"),onChange:e=>{e.target.checked?pe((0,i.A)((0,i.A)({},ce),{},{languages:[...ce.languages,"english_basic"]})):pe((0,i.A)((0,i.A)({},ce),{},{languages:ce.languages.filter(e=>"english_basic"!==e)}))}}),label:"Ingl\xe9s B\xe1sico"}),(0,X.jsx)(I.A,{control:(0,X.jsx)(R.A,{checked:ce.languages.includes("english_intermediate"),onChange:e=>{e.target.checked?pe((0,i.A)((0,i.A)({},ce),{},{languages:[...ce.languages,"english_intermediate"]})):pe((0,i.A)((0,i.A)({},ce),{},{languages:ce.languages.filter(e=>"english_intermediate"!==e)}))}}),label:"Ingl\xe9s Intermedio"})]})]}),(0,X.jsxs)(Q,{value:ne,index:2,children:[(0,X.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Certificaciones Disponibles"}),(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Obt\xe9n certificaciones gratuitas o de bajo costo para mejorar tu perfil"}),(0,X.jsx)(P.Ay,{container:!0,spacing:2,children:ue.map(e=>(0,X.jsx)(P.Ay,{item:!0,xs:12,md:6,children:(0,X.jsx)(u.A,{variant:"outlined",children:(0,X.jsx)(h.A,{children:(0,X.jsxs)(o.A,{display:"flex",gap:2,children:[(0,X.jsx)(g.A,{sx:{bgcolor:"primary.light"},children:e.icon}),(0,X.jsxs)(o.A,{flex:1,children:[(0,X.jsx)(p.A,{variant:"subtitle1",fontWeight:"bold",children:e.name}),(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),(0,X.jsxs)(w.A,{direction:"row",spacing:1,mb:1,children:[(0,X.jsx)(k.A,{label:e.provider,size:"small"}),(0,X.jsx)(k.A,{label:e.duration,size:"small",variant:"outlined"}),(0,X.jsx)(k.A,{label:e.price,size:"small",color:"Gratis"===e.price?"success":"default"})]}),(0,X.jsx)(b.A,{variant:"contained",size:"small",startIcon:(0,X.jsx)(F.A,{}),onClick:()=>{le({type:"success",text:"Te hemos registrado para ".concat(e.name,". Recibir\xe1s m\xe1s informaci\xf3n por WhatsApp.")})},children:"Inscribirse"})]})]})})})},e.id))})]}),(0,X.jsxs)(Q,{value:ne,index:3,children:[(0,X.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"D\xedas Disponibles"}),(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Marca los d\xedas que puedes trabajar"}),(0,X.jsx)(P.Ay,{container:!0,spacing:2,sx:{mb:3},children:[{day:"Lunes",key:"monday"},{day:"Martes",key:"tuesday"},{day:"Mi\xe9rcoles",key:"wednesday"},{day:"Jueves",key:"thursday"},{day:"Viernes",key:"friday"},{day:"S\xe1bado",key:"saturday"},{day:"Domingo",key:"sunday"}].map(e=>{let{day:a,key:r}=e;return(0,X.jsx)(P.Ay,{item:!0,xs:6,sm:4,md:3,children:(0,X.jsx)(u.A,{variant:"outlined",sx:{bgcolor:ce.availability[r]?"success.light":"grey.100"},children:(0,X.jsx)(h.A,{children:(0,X.jsx)(I.A,{control:(0,X.jsx)(E.A,{checked:ce.availability[r],onChange:e=>{pe((0,i.A)((0,i.A)({},ce),{},{availability:(0,i.A)((0,i.A)({},ce.availability),{},{[r]:e.target.checked})}))},color:"success"}),label:a})})})},r)})}),(0,X.jsx)(C.A,{sx:{my:3}}),(0,X.jsx)(p.A,{variant:"h6",gutterBottom:!0,children:"Zonas de Trabajo Preferidas"}),(0,X.jsx)(p.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Selecciona las colonias de \xc1lvaro Obreg\xf3n donde prefieres trabajar"}),(0,X.jsx)(o.A,{display:"flex",flexWrap:"wrap",gap:1,children:["Santa Fe","San \xc1ngel","San \xc1ngel Inn","Florida","Guadalupe Inn","Chimalistac","Tlacopac","Las \xc1guilas","Olivar de los Padres","Mixcoac","Alfonso XIII","Progreso Tizap\xe1n","Barrio Norte","Lomas de Plateros","Merced G\xf3mez"].map(e=>(0,X.jsx)(k.A,{label:e,onClick:()=>(e=>{ce.preferredAreas.includes(e)?pe((0,i.A)((0,i.A)({},ce),{},{preferredAreas:ce.preferredAreas.filter(a=>a!==e)})):pe((0,i.A)((0,i.A)({},ce),{},{preferredAreas:[...ce.preferredAreas,e]}))})(e),color:ce.preferredAreas.includes(e)?"primary":"default",variant:ce.preferredAreas.includes(e)?"filled":"outlined",icon:ce.preferredAreas.includes(e)?(0,X.jsx)(D.A,{}):void 0},e))})]})]}),(0,X.jsxs)(o.A,{display:"flex",justifyContent:"space-between",mt:3,children:[(0,X.jsx)(b.A,{variant:"outlined",size:"large",onClick:()=>r("/dashboard"),children:"Cancelar"}),(0,X.jsx)(b.A,{variant:"contained",size:"large",startIcon:(0,X.jsx)(_.A,{}),onClick:async()=>{try{if(ie(!0),!ce.name||!ce.location||ce.trade===V.h.OTHER)return void le({type:"error",text:"Por favor completa todos los campos requeridos"});await(0,$.mZ)((0,$.H9)(J.db,"workers",s.uid),(0,i.A)((0,i.A)({},ce),{},{updatedAt:new Date})),le({type:"success",text:"\u2705 Perfil actualizado correctamente"}),setTimeout(()=>{r("/dashboard")},2e3)}catch(e){console.error("Error saving profile:",e),le({type:"error",text:"Error al guardar el perfil"})}finally{ie(!1)}},disabled:re||oe<50,children:re?(0,X.jsx)(c.A,{size:24}):"Guardar Perfil"})]})]})}}}]);
//# sourceMappingURL=994.a27d83af.chunk.js.map